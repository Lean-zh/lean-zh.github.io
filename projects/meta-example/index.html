<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://leanprover.cn/projects/meta-example/ rel=canonical><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>Lean4 é¡¹ç›®å®æˆ˜ - Lean Prover ä¸­æ–‡æ–‡æ¡£</title><link rel=stylesheet href=../../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/admonition-custom.css><link rel=stylesheet href=../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#lean4 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Lean Prover ä¸­æ–‡æ–‡æ¡£" class="md-header__button md-logo" aria-label="Lean Prover ä¸­æ–‡æ–‡æ¡£" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Lean Prover ä¸­æ–‡æ–‡æ¡£ </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Lean4 é¡¹ç›®å®æˆ˜ </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Lean-zh/Lean-zh.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Lean-zh </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> ä¸»é¡µ </a> </li> <li class=md-tabs__item> <a href=../verso/ class=md-tabs__link> é¡¹ç›®æ•™ç¨‹ </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Lean Prover ä¸­æ–‡æ–‡æ¡£" class="md-nav__button md-logo" aria-label="Lean Prover ä¸­æ–‡æ–‡æ¡£" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Lean Prover ä¸­æ–‡æ–‡æ¡£ </label> <div class=md-nav__source> <a href=https://github.com/Lean-zh/Lean-zh.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Lean-zh </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> ä¸»é¡µ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> ä¸»é¡µ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Lean-zh </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> é¡¹ç›®æ•™ç¨‹ </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> é¡¹ç›®æ•™ç¨‹ </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../verso/ class=md-nav__link> <span class=md-ellipsis> Verso æ•™ç¨‹ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> åˆ›å»ºé¡¹ç›® </span> </a> <nav class=md-nav aria-label=åˆ›å»ºé¡¹ç›®> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> åˆ›å»ºçš„å…¶ä»–é€‰é¡¹ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#lake class=md-nav__link> <span class=md-ellipsis> Lake é¡¹ç›®é…ç½®è¯¦è§£ </span> </a> <nav class=md-nav aria-label="Lake é¡¹ç›®é…ç½®è¯¦è§£"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> åŸºç¡€é…ç½®æ–‡ä»¶ </span> </a> <nav class=md-nav aria-label=åŸºç¡€é…ç½®æ–‡ä»¶> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> æ·»åŠ æ¨¡å— </span> </a> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> ä¿®æ”¹ç‰ˆæœ¬ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> é…ç½®å¯æ‰§è¡Œç¨‹åº </span> </a> </li> <li class=md-nav__item> <a href=#_7 class=md-nav__link> <span class=md-ellipsis> å®Œæ•´é…ç½®æ–‡ä»¶ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_8 class=md-nav__link> <span class=md-ellipsis> é¡¹ç›®ä»£ç å®ç° </span> </a> <nav class=md-nav aria-label=é¡¹ç›®ä»£ç å®ç°> <ul class=md-nav__list> <li class=md-nav__item> <a href=#hello-world class=md-nav__link> <span class=md-ellipsis> Hello World ç¨‹åºå®ç° </span> </a> </li> <li class=md-nav__item> <a href=#_9 class=md-nav__link> <span class=md-ellipsis> äº¤äº’å¼ç¨‹åº </span> </a> </li> <li class=md-nav__item> <a href=#_10 class=md-nav__link> <span class=md-ellipsis> ç¼–å†™å…ƒç­–ç•¥ </span> </a> </li> <li class=md-nav__item> <a href=#_11 class=md-nav__link> <span class=md-ellipsis> å°ç»“ </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_12 class=md-nav__link> <span class=md-ellipsis> æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–åŠå‘å¸ƒ </span> </a> <nav class=md-nav aria-label=æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–åŠå‘å¸ƒ> <ul class=md-nav__list> <li class=md-nav__item> <a href=#_13 class=md-nav__link> <span class=md-ellipsis> æµ‹è¯•é…ç½® </span> </a> </li> <li class=md-nav__item> <a href=#_14 class=md-nav__link> <span class=md-ellipsis> è‡ªåŠ¨åŒ– </span> </a> </li> <li class=md-nav__item> <a href=#_15 class=md-nav__link> <span class=md-ellipsis> é¡¹ç›®å‘å¸ƒ </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=lean4>Lean4 é¡¹ç›®å®æˆ˜<a class=headerlink href=#lean4 title="Permanent link">&para;</a></h1> <p><a href=../../tutorial/elan-lake/ >å‰æ–‡</a>ä»‹ç»äº† Lean é¡¹ç›®çš„åŸºæœ¬ç»“æ„å’Œæ–‡ä»¶ç»„ç»‡æ–¹å¼ï¼Œä¹Ÿä»‹ç»äº† Lean å¼€å‘çš„ä¸‰ä»¶å¥—å·¥å…·ï¼šelanã€lake å’Œ leanã€‚è¿™äº›å·¥å…·ç»„åˆç±»ä¼¼äºå…¶ä»–è¯­è¨€ç”Ÿæ€ä¸­çš„å·¥å…·é“¾ï¼Œæ¯”å¦‚ï¼š</p> <ul> <li>Rust ä¸­çš„ rustup + cargo + rustc</li> <li>Node.js ä¸­çš„ nvm + npm + node</li> </ul> <p>æœ¬æ–‡å°†è¿›è¡Œå®æˆ˜æ¼”ç»ƒï¼Œå®Œæ•´ä½“éªŒ Lean é¡¹ç›®çš„å¼€å‘æµç¨‹ï¼ŒåŒ…æ‹¬ï¼š</p> <ul> <li>é¡¹ç›®åˆ›å»º</li> <li>ä¾èµ–ç®¡ç†ä¸é…ç½®</li> <li>ç»ˆç«¯äº¤äº’å’Œå…ƒç¼–ç¨‹ç­–ç•¥ç¼–å†™</li> <li>æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–ä»¥åŠæ”¶å½•ç›¸å…³</li> </ul> <p>ç›¸å…³ä»£ç å¯ä»¥åœ¨ä»“åº“æ‰¾åˆ°ï¼š<a href=https://github.com/Lean-zh/MyTactics>Lean-zh/MyTactics</a>ã€‚</p> <p><strong>å‚è€ƒèµ„æº</strong></p> <ul> <li>å…ƒç¼–ç¨‹ç¤ºä¾‹æ•™ç¨‹ï¼š<a href=https://github.com/siddhartha-gadgil/MetaExamples>MetaExamples</a></li> <li>Lean ä¸­æ–‡æ–‡æ¡£ï¼š<a href=https://www.leanprover.cn/fp-lean-zh/ >å‡½æ•°å¼ç¼–ç¨‹</a>ï¼Œ<a href=../../references/lake-doc/ >Lake æ–‡æ¡£</a>ä»¥åŠ <a href=../../install/ >Lean4 å®‰è£…æŒ‡å—</a></li> </ul> <p><strong>å‡†å¤‡å·¥ä½œ</strong></p> <p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œè¯·ç¡®ä¿ï¼š</p> <ol> <li>å·²æ­£ç¡®å®‰è£… Lean4 å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œ <code>elan</code>ã€<code>lake</code> å’Œ <code>lean</code> å‘½ä»¤</li> <li>äº†è§£ Lean é¡¹ç›®çš„åŸºæœ¬ç»“æ„ï¼Œç†Ÿæ‚‰ <code>lakefile.lean</code> å’Œ <code>lakefile.toml</code> ç­‰é…ç½®æ–‡ä»¶çš„ä½œç”¨</li> </ol> <h2 id=_1>åˆ›å»ºé¡¹ç›®<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Lean é¡¹ç›®ï¼Œå‘½åä¸º <code>MyTactics</code>ï¼Œå¹¶ä½¿ç”¨ Mathlib ä½œä¸ºä¾èµ–åº“ã€‚åˆ›å»ºå‘½ä»¤å¦‚ä¸‹ï¼š</p> <div class=highlight><pre><span></span><code>lake<span class=w> </span>new<span class=w> </span>MyTactics<span class=w> </span>math.lean
</code></pre></div> <p>æ‰§è¡Œå®Œæˆåï¼Œå°†ç”Ÿæˆå¦‚ä¸‹é¡¹ç›®ç»“æ„ï¼š</p> <div class=highlight><pre><span></span><code>MyTactics/
â”œâ”€â”€<span class=w> </span>MyTactics/
â”‚<span class=w>   </span>â””â”€â”€<span class=w> </span>Basic.lean<span class=w>    </span><span class=c1># åŸºç¡€æ¨¡å—æ–‡ä»¶</span>
â”œâ”€â”€<span class=w> </span>MyTactics.lean<span class=w>    </span><span class=c1># ä¸»æ¨¡å—æ–‡ä»¶</span>
â”œâ”€â”€<span class=w> </span>README.md<span class=w>         </span><span class=c1># é¡¹ç›®è¯´æ˜æ–‡æ¡£</span>
â”œâ”€â”€<span class=w> </span>lakefile.lean<span class=w>     </span><span class=c1># Lake æ„å»ºé…ç½®æ–‡ä»¶</span>
â””â”€â”€<span class=w> </span>lean-toolchain<span class=w>    </span><span class=c1># Lean å·¥å…·é“¾ç‰ˆæœ¬é…ç½®</span>
</code></pre></div> <h3 id=_2>åˆ›å»ºçš„å…¶ä»–é€‰é¡¹<a class=headerlink href=#_2 title="Permanent link">&para;</a></h3> <p>Lake æä¾›äº†å¤šç§é¡¹ç›®åˆ›å»ºé€‰é¡¹ï¼š</p> <div class=highlight><pre><span></span><code><span class=c1># ä½¿ç”¨ TOML æ ¼å¼çš„ä¾èµ–é…ç½®æ–‡ä»¶</span>
lake<span class=w> </span>new<span class=w> </span>MyTactics<span class=w> </span>math.toml

<span class=c1># åˆ›å»ºä¸ä¾èµ– Mathlib çš„çº¯ Lean é¡¹ç›®</span>
lake<span class=w> </span>new<span class=w> </span>MyTactics<span class=w> </span>.lean

<span class=c1># ä½¿ç”¨æŒ‡å®šç‰ˆæœ¬çš„ Lean åˆ›å»ºé¡¹ç›®</span>
elan<span class=w> </span>run<span class=w> </span>leanprover/lean4:v4.10.0<span class=w> </span>lake<span class=w> </span>new<span class=w> </span>MyTactics<span class=w> </span>.lean
</code></pre></div> <p>ç‰¹åˆ«æ³¨æ„ï¼Œå½“ä½¿ç”¨ Mathlib ä½œä¸ºä¾èµ–æ—¶ï¼Œæ–°å»ºé¡¹ç›®ä¼šè‡ªåŠ¨ä½¿ç”¨æœ€æ–°çš„ Lean ç‰ˆæœ¬ï¼Œè¿™ä¸ªè¡Œä¸ºä¸æ‰§è¡Œåˆ›å»ºå‘½ä»¤æ—¶çš„ Lake ç‰ˆæœ¬æ— å…³ã€‚éœ€æ‰‹åŠ¨ä¿®æ”¹ <code>lean-toolchain</code> æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬å·ã€‚</p> <h2 id=lake>Lake é¡¹ç›®é…ç½®è¯¦è§£<a class=headerlink href=#lake title="Permanent link">&para;</a></h2> <h3 id=_3>åŸºç¡€é…ç½®æ–‡ä»¶<a class=headerlink href=#_3 title="Permanent link">&para;</a></h3> <p>ç”Ÿæˆçš„ <code>lakefile.lean</code> åŒ…å«ä»¥ä¸‹ä¸»è¦é…ç½®ï¼š</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=n>Lake</span>
<span class=kn>open</span><span class=w> </span><span class=n>Lake</span><span class=w> </span><span class=n>DSL</span>

<span class=n>package</span><span class=w> </span><span class=s2>&quot;MyTactics&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=c1>-- Settings applied to both builds and interactive editing</span>
<span class=w>  </span><span class=n>leanOptions</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=bp>#</span><span class=o>[</span>
<span class=w>    </span><span class=o>âŸ¨</span><span class=ss>`pp.unicode.fun</span><span class=o>,</span><span class=w> </span><span class=n>true</span><span class=o>âŸ©</span><span class=w> </span><span class=c1>-- pretty-prints `fun a â†¦ b`</span>
<span class=w>  </span><span class=o>]</span>
<span class=w>  </span><span class=c1>-- add any additional package configuration options here</span>

<span class=n>require</span><span class=w> </span><span class=s2>&quot;leanprover-community&quot;</span><span class=w> </span><span class=bp>/</span><span class=w> </span><span class=s2>&quot;mathlib&quot;</span>

<span class=kd>@[</span><span class=n>default_target</span><span class=kd>]</span>
<span class=n>lean_lib</span><span class=w> </span><span class=bp>Â«</span><span class=n>MyTactics</span><span class=bp>Â»</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=c1>-- add any library configuration options here</span>
</code></pre></div> <p>é…ç½®æ–‡ä»¶åˆ†ä¸ºä¸‰ä¸ªä¸»è¦éƒ¨åˆ†ï¼š</p> <ol> <li> <p><strong>åŒ…ä¿¡æ¯è®¾ç½®</strong>ï¼ˆpackageï¼‰ï¼š <div class=highlight><pre><span></span><code><span class=n>package</span><span class=w> </span><span class=s2>&quot;MyTactics&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>leanOptions</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=bp>#</span><span class=o>[</span>
<span class=w>    </span><span class=o>âŸ¨</span><span class=ss>`pp.unicode.fun</span><span class=o>,</span><span class=w> </span><span class=n>true</span><span class=o>âŸ©</span>
<span class=w>  </span><span class=o>]</span>
</code></pre></div></p> </li> <li> <p><strong>ä¾èµ–é¡¹å£°æ˜</strong>ï¼ˆrequireï¼‰ï¼š <div class=highlight><pre><span></span><code><span class=n>require</span><span class=w> </span><span class=s2>&quot;leanprover-community&quot;</span><span class=w> </span><span class=bp>/</span><span class=w> </span><span class=s2>&quot;mathlib&quot;</span>
</code></pre></div></p> </li> <li> <p><strong>æ„å»ºç›®æ ‡è®¾ç½®</strong>ï¼ˆlean_libï¼‰ï¼š <div class=highlight><pre><span></span><code><span class=kd>@[</span><span class=n>default_target</span><span class=kd>]</span>
<span class=n>lean_lib</span><span class=w> </span><span class=bp>Â«</span><span class=n>MyTactics</span><span class=bp>Â»</span><span class=w> </span><span class=n>where</span>
</code></pre></div> <code>@[default_target]</code> è¡¨ç¤ºè¿™æ˜¯é»˜è®¤æ„å»ºç›®æ ‡ï¼Œä½¿ç”¨ <code>lake build</code> æ—¶ä¼šè‡ªåŠ¨æ„å»ºã€‚</p> </li> </ol> <h4 id=_4>æ·»åŠ æ¨¡å—<a class=headerlink href=#_4 title="Permanent link">&para;</a></h4> <p>æ¯ä¸ª <code>lean_lib</code> å£°æ˜éƒ½éœ€è¦å¯¹åº”å®é™…çš„ Lean æ–‡ä»¶ï¼Œæ¯”å¦‚æ·»åŠ </p> <div class=highlight><pre><span></span><code><span class=n>lean_lib</span><span class=w> </span><span class=bp>Â«</span><span class=n>Hello</span><span class=bp>Â»</span><span class=w> </span><span class=n>where</span>
</code></pre></div> <p>åˆ™éœ€åœ¨é¡¹ç›®ç›®å½•ä¸‹æ·»åŠ  <code>Hello.lean</code> æ–‡ä»¶ã€‚æ­¤å¤–ï¼Œå¯ä»¥ç”¨æ–‡ä»¶å¤¹ç»„ç»‡é¡¹ç›®ä»£ç ï¼Œä¾‹å¦‚ <code>Hello/greet.lean</code> æ–‡ä»¶é€šè¿‡ <code>import Hello.greet</code> å¯¼å…¥ã€‚</p> <h4 id=_5>ä¿®æ”¹ç‰ˆæœ¬<a class=headerlink href=#_5 title="Permanent link">&para;</a></h4> <p>å¦‚æœå¼•ç”¨äº† Mathlibï¼Œå»ºè®®ä½¿ç”¨ä»¥ä¸‹é…ç½®ï¼Œç¡®ä¿ Mathlib ç‰ˆæœ¬ä¸é¡¹ç›®ä¸€è‡´ï¼Œé¿å…æ„å»ºé”™è¯¯ã€‚</p> <div class=highlight><pre><span></span><code><span class=n>require</span><span class=w> </span><span class=n>mathlib</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>git</span>
<span class=w>  </span><span class=s2>&quot;https://github.com/leanprover-community/mathlib4.git&quot;</span><span class=w> </span><span class=bp>@</span><span class=w> </span><span class=n>s</span><span class=bp>!</span><span class=s2>&quot;v{Lean.versionString}&quot;</span>
</code></pre></div> <p>è¿™é‡Œ <code>s!"v{Lean.versionString}"</code> ä¼šè¯»å–ä»“åº“å½“å‰çš„ Lean ç‰ˆæœ¬ã€‚</p> <h3 id=_6>é…ç½®å¯æ‰§è¡Œç¨‹åº<a class=headerlink href=#_6 title="Permanent link">&para;</a></h3> <p>åœ¨ Lean ç”Ÿæ€ä¸­ï¼Œå¾ˆå¤šé¡¹ç›®éƒ½ä¼šæä¾›å¯æ‰§è¡Œç¨‹åºï¼Œä¾‹å¦‚ï¼š</p> <ul> <li><code>lake exe cache get</code>ï¼šç”¨äºæ‹‰å– Mathlib çš„æ„å»ºç¼“å­˜</li> <li><code>lake env jixia</code>ï¼šè¿è¡Œ <a href=https://github.com/frenzymath/jixia>JiXia</a> çš„æ•°æ®åˆ†æå·¥å…·</li> <li><code>lake env repl</code>ï¼šå¯åŠ¨ Lean çš„ REPL ç¯å¢ƒ</li> </ul> <p>è¿™äº›å¯æ‰§è¡Œå‘½ä»¤é€šè¿‡ <code>lakefile.lean</code> ä¸­çš„ <code>lean_exe</code> å‚æ•°è¿›è¡Œé…ç½®ã€‚è®©æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æ·»åŠ ä¸¤ä¸ªå¯æ‰§è¡Œç¨‹åºçš„é…ç½®ï¼š</p> <div class=highlight><pre><span></span><code><span class=n>lean_exe</span><span class=w> </span><span class=s2>&quot;hello&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>root</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=ss>`Hello.Greet</span>

<span class=kd>@[</span><span class=n>default_target</span><span class=kd>]</span>
<span class=n>lean_exe</span><span class=w> </span><span class=s2>&quot;demo&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>root</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=ss>`Demo</span>
</code></pre></div> <p>åŒæ ·åœ°ï¼Œè¢« <code>@[default_target]</code> æ ‡è®°çš„ç›®æ ‡ä¼šåœ¨æ‰§è¡Œ <code>lake build</code> æ—¶è‡ªåŠ¨æ„å»ºï¼Œæ— éœ€æ˜¾å¼æ‰§è¡Œ <code>lake build demo</code>ã€‚</p> <p>é™¤äº† <code>lean_exe</code> æ¨¡å—å¤–ï¼Œä¹Ÿå¯ä»¥ç”¨ <code>script</code> å­—æ®µå®šä¹‰è„šæœ¬ã€‚ä¾‹å¦‚ï¼š</p> <div class=highlight><pre><span></span><code><span class=n>script</span><span class=w> </span><span class=s2>&quot;greet&quot;</span><span class=w> </span><span class=o>(</span><span class=n>args</span><span class=o>)</span><span class=w> </span><span class=k>do</span>
<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=n>h</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>0</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=n>args.length</span><span class=w> </span><span class=k>then</span>
<span class=w>    </span><span class=n>IO.println</span><span class=w> </span><span class=n>s</span><span class=bp>!</span><span class=s2>&quot;Hello, {args[0]&#39;h}!&quot;</span>
<span class=w>  </span><span class=k>else</span>
<span class=w>    </span><span class=n>IO.println</span><span class=w> </span><span class=s2>&quot;Hello, world!&quot;</span>
<span class=w>  </span><span class=n>return</span><span class=w> </span><span class=mi>0</span>
</code></pre></div> <p>è¿è¡Œ <code>lake script greet</code> å‘½ä»¤è¿è¡Œè¯¥è„šæœ¬ã€‚</p> <h3 id=_7>å®Œæ•´é…ç½®æ–‡ä»¶<a class=headerlink href=#_7 title="Permanent link">&para;</a></h3> <p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†ä¸€ä¸ª Lean é¡¹ç›®ï¼Œå¹¶æ ¹æ®éœ€æ±‚ä¿®æ”¹äº†ä¾èµ–ã€‚å®Œæ•´çš„ <code>lakefile.lean</code> å†…å®¹å¦‚ä¸‹ï¼š</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=n>Lake</span>
<span class=kn>open</span><span class=w> </span><span class=n>Lake</span><span class=w> </span><span class=n>DSL</span>

<span class=n>package</span><span class=w> </span><span class=s2>&quot;MyTactics&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=c1>-- Settings applied to both builds and interactive editing</span>
<span class=w>  </span><span class=n>leanOptions</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=bp>#</span><span class=o>[</span>
<span class=w>    </span><span class=o>âŸ¨</span><span class=ss>`pp.unicode.fun</span><span class=o>,</span><span class=w> </span><span class=n>true</span><span class=o>âŸ©</span><span class=w> </span><span class=c1>-- pretty-prints `fun a â†¦ b`</span>
<span class=w>  </span><span class=o>]</span>
<span class=w>  </span><span class=c1>-- add any additional package configuration options here</span>

<span class=n>require</span><span class=w> </span><span class=n>mathlib</span><span class=w> </span><span class=k>from</span><span class=w> </span><span class=n>git</span>
<span class=w>  </span><span class=s2>&quot;https://github.com/leanprover-community/mathlib4.git&quot;</span><span class=w> </span><span class=bp>@</span><span class=w> </span><span class=n>s</span><span class=bp>!</span><span class=s2>&quot;v{Lean.versionString}&quot;</span>

<span class=kd>@[</span><span class=n>default_target</span><span class=kd>]</span>
<span class=n>lean_lib</span><span class=w> </span><span class=bp>Â«</span><span class=n>MyTactics</span><span class=bp>Â»</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=c1>-- add any library configuration options here</span>

<span class=n>lean_lib</span><span class=w> </span><span class=bp>Â«</span><span class=n>Hello</span><span class=bp>Â»</span><span class=w> </span><span class=n>where</span>

<span class=n>lean_exe</span><span class=w> </span><span class=s2>&quot;hello&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>root</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=ss>`Hello.Greet</span>

<span class=kd>@[</span><span class=n>default_target</span><span class=kd>]</span>
<span class=n>lean_exe</span><span class=w> </span><span class=s2>&quot;demo&quot;</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>root</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=ss>`Demo</span>
</code></pre></div> <p>é…ç½®å®Œæˆåçš„é¡¹ç›®ç»“æ„ï¼š</p> <div class=highlight><pre><span></span><code>MyTactics/
â”œâ”€â”€<span class=w> </span>Demo.lean<span class=w>           </span><span class=c1># æ¼”ç¤ºç¨‹åºä¸»æ–‡ä»¶</span>
â”œâ”€â”€<span class=w> </span>Hello/
â”‚<span class=w>   </span>â””â”€â”€<span class=w> </span>Greet.lean<span class=w>     </span><span class=c1># Hello ç¨‹åºå®ç°</span>
â”œâ”€â”€<span class=w> </span>Hello.lean<span class=w>         </span><span class=c1># Hello æ¨¡å—ä¸»æ–‡ä»¶</span>
â”œâ”€â”€<span class=w> </span>MyTactics/
â”‚<span class=w>   </span>â””â”€â”€<span class=w> </span>Basic.lean<span class=w>     </span><span class=c1># åŸºç¡€åŠŸèƒ½å®ç°</span>
â”œâ”€â”€<span class=w> </span>MyTactics.lean<span class=w>     </span><span class=c1># ä¸»æ¨¡å—æ–‡ä»¶</span>
â”œâ”€â”€<span class=w> </span>README.md<span class=w>          </span><span class=c1># é¡¹ç›®æ–‡æ¡£</span>
â”œâ”€â”€<span class=w> </span>lake-manifest.json<span class=w> </span><span class=c1># Lake ä¾èµ–æ¸…å•</span>
â”œâ”€â”€<span class=w> </span>lakefile.lean<span class=w>      </span><span class=c1># Lake é…ç½®æ–‡ä»¶</span>
â””â”€â”€<span class=w> </span>lean-toolchain<span class=w>     </span><span class=c1># Lean ç‰ˆæœ¬é…ç½®</span>
</code></pre></div> <p>æ·»åŠ äº†è‡ªå®šä¹‰çš„ <code>Hello/Greet.lean</code> æ–‡ä»¶å’Œ <code>Demo.lean</code> æ–‡ä»¶ã€‚</p> <p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†å¼€å§‹ç¼–å†™å…·ä½“çš„å®ç°ä»£ç ã€‚</p> <h2 id=_8>é¡¹ç›®ä»£ç å®ç°<a class=headerlink href=#_8 title="Permanent link">&para;</a></h2> <p>åœ¨å®Œæˆé¡¹ç›®é…ç½®åï¼Œæˆ‘ä»¬å¼€å§‹ç¼–å†™å…·ä½“çš„ä»£ç å®ç°ã€‚æœ¬èŠ‚å°†åˆ†ä¸‰ä¸ªéƒ¨åˆ†å±•ç¤ºï¼š</p> <ol> <li>Hello World ç¨‹åº</li> <li>äº¤äº’å¼ç¨‹åº</li> <li>å…ƒç¼–ç¨‹ç­–ç•¥</li> </ol> <h3 id=hello-world>Hello World ç¨‹åºå®ç°<a class=headerlink href=#hello-world title="Permanent link">&para;</a></h3> <p>ä½œä¸ºç¨‹åºå‘˜çš„ä¼ ç»Ÿï¼Œå…ˆä»æœ€åŸºç¡€çš„ Hello World ç¨‹åºå¼€å§‹ã€‚</p> <p>ç¼–å†™ <code>Hello/Greet.lean</code> æ–‡ä»¶ï¼š</p> <div class=highlight><pre><span></span><code><span class=kd>def</span><span class=w> </span><span class=n>name</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=s2>&quot;Rex&quot;</span>
<span class=kd>def</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>IO</span><span class=w> </span><span class=n>Unit</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>IO.println</span><span class=w> </span><span class=n>s</span><span class=bp>!</span><span class=s2>&quot;Hello, {name}!&quot;</span>
</code></pre></div> <p>ç„¶ååœ¨ <code>Hello.lean</code> ä¸­å¯¼å…¥æ¨¡å—ï¼š</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=n>Hello.Greet</span>
</code></pre></div> <p>å¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç§æ–¹å¼è¿è¡Œç¨‹åºï¼š</p> <ol> <li><code>lake exe hello</code>ï¼šé‡æ–°æ„å»ºå¹¶è¿è¡Œ</li> <li><code>lake env hello</code>ï¼šç›´æ¥è¿è¡Œå·²æ„å»ºçš„ç¨‹åº</li> <li><code>lean --run Hello/Greet.lean</code>ï¼šç›´æ¥æ‰§è¡Œè„šæœ¬çš„ <code>main</code> å‡½æ•°</li> </ol> <p>ä¸‹å›¾å±•ç¤ºäº† <code>lake exe</code> å’Œ <code>lake env</code> çš„åŒºåˆ«ï¼š</p> <p><img alt=lake-hello src=../../assets/imgs/lake-hello.svg></p> <blockquote> <p>ğŸ’¡ <strong>å…³äº Lean ä¸­çš„å‰¯ä½œç”¨</strong></p> <p>Lean çš„è®¡ç®—æ¨¡å‹åŸºäºè¡¨è¾¾å¼æ±‚å€¼ï¼Œç†è®ºä¸Šæ˜¯çº¯å‡½æ•°å¼çš„ï¼Œä¸å­˜åœ¨å‰¯ä½œç”¨ï¼ˆside effectsï¼‰ã€‚ ä½†ç°å®ä¸­ç¨‹åºéœ€è¦ä¸å¤–éƒ¨ä¸–ç•Œäº¤äº’ï¼ŒLean é€šè¿‡ <code>IO</code> ç±»å‹ä¼˜é›…åœ°è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š</p> <ul> <li><code>main</code> å‡½æ•°çš„ç±»å‹ <code>IO Unit</code> è¡¨æ˜å®ƒä¸æ˜¯ä¸€ä¸ªç›´æ¥äº§ç”Ÿå‰¯ä½œç”¨çš„å‡½æ•°</li> <li>è€Œæ˜¯ä¸€ä¸ªæè¿°äº† IO æ“ä½œçš„å£°æ˜æ€§è¡¨è¾¾</li> <li>å¯ä»¥å°† IO æ“ä½œè§†ä¸ºä¸€ä¸ªæ¥æ”¶"æ•´ä¸ªä¸–ç•Œ"ä½œä¸ºè¾“å…¥ï¼Œå¹¶è¿”å›æ–°çš„ä¸–ç•ŒçŠ¶æ€çš„çº¯å‡½æ•°</li> </ul> <p>æ›´å¤šå…³äº Lean å‡½æ•°å¼ç¼–ç¨‹çš„è®¨è®ºï¼Œå¯ä»¥å‚è€ƒ <a href=https://www.leanprover.cn/fp-lean-zh/hello-world/running-a-program.html>Lean å‡½æ•°å¼ç¼–ç¨‹æŒ‡å—</a>ã€‚</p> </blockquote> <h3 id=_9>äº¤äº’å¼ç¨‹åº<a class=headerlink href=#_9 title="Permanent link">&para;</a></h3> <p>ä¸‹è¾¹æ¼”ç¤º Lean å¦‚ä½•å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚</p> <p>åˆ›å»º <code>Demo.lean</code> æ–‡ä»¶ï¼Œå®ç°ä¸€ä¸ªå¤šè¡Œæ–‡æœ¬çš„æ‹¼æ¥ç¨‹åºï¼š</p> <div class=highlight><pre><span></span><code><span class=sd>/-- é€’å½’è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œç›´åˆ°é‡åˆ°ç©ºè¡Œä¸ºæ­¢ -/</span>
<span class=n>partial</span><span class=w> </span><span class=kd>def</span><span class=w> </span><span class=n>getLines</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>IO</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>do</span>
<span class=w>  </span><span class=n>IO.print</span><span class=w> </span><span class=s2>&quot;Enter your text: &quot;</span>
<span class=w>  </span><span class=k>let</span><span class=w> </span><span class=n>line</span><span class=w> </span><span class=bp>â†</span><span class=w> </span><span class=o>(</span><span class=bp>â†</span><span class=w> </span><span class=n>IO.getStdin</span><span class=o>)</span><span class=bp>.</span><span class=n>getLine</span>
<span class=w>  </span><span class=k>if</span><span class=w> </span><span class=n>line.trim.isEmpty</span><span class=w> </span><span class=k>then</span>
<span class=w>    </span><span class=n>return</span><span class=w> </span><span class=n>line.trimRight</span>
<span class=w>  </span><span class=k>else</span>
<span class=w>    </span><span class=n>return</span><span class=w> </span><span class=n>line.trimRight</span><span class=w> </span><span class=bp>++</span><span class=w> </span><span class=o>(</span><span class=bp>â†</span><span class=w> </span><span class=n>getLines</span><span class=o>)</span>

<span class=sd>/-- ä¸»ç¨‹åºï¼šè¯»å–å¹¶æ‹¼æ¥å¤šè¡Œè¾“å…¥ -/</span>
<span class=kd>def</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>IO</span><span class=w> </span><span class=n>Unit</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>do</span>
<span class=w>  </span><span class=k>let</span><span class=w> </span><span class=n>stdin</span><span class=w> </span><span class=bp>â†</span><span class=w> </span><span class=n>getLines</span>
<span class=w>  </span><span class=n>IO.println</span><span class=w> </span><span class=n>s</span><span class=bp>!</span><span class=s2>&quot;Concatenated lines: {stdin}&quot;</span>
</code></pre></div> <p>è¿™é‡Œ <code>partial</code> å…³é”®å­—ç”¨äºå£°æ˜é€’å½’å‡½æ•° <code>getLines</code>ï¼Œå‘Šè¯‰ Lean ç¼–è¯‘å™¨ä¸éœ€è¦éªŒè¯å‡½æ•°çš„ç»ˆæ­¢æ€§ã€‚æ‰§è¡Œæ•ˆæœï¼š</p> <p><img alt=lake-demo src=../../assets/imgs/lake-demo.svg></p> <p>Lean ç¤¾åŒºçš„ <a href=../../tool/repl/ >REPL</a> å°±æ˜¯åŸºäºç±»ä¼¼çš„æœºåˆ¶å®ç° Lean ä¸å¤–éƒ¨ç¯å¢ƒçš„ä¿¡æ¯äº¤æµã€‚</p> <h3 id=_10>ç¼–å†™å…ƒç­–ç•¥<a class=headerlink href=#_10 title="Permanent link">&para;</a></h3> <p>åœ¨è‡ªå®šä¹‰å…ƒç­–ç•¥ä¹‹å‰ï¼Œå…ˆäº†è§£ä¸¤ä¸ªå¸¸ç”¨çš„ tacticï¼š</p> <ol> <li><code>repeat</code>ï¼šé‡å¤æ‰§è¡ŒæŸä¸ªç­–ç•¥ç›´åˆ°è¯æ˜å®Œæˆ</li> <li><code>first | tacâ‚ | tacâ‚‚ | ...</code>ï¼šæŒ‰é¡ºåºä¾æ­¤å°è¯•ç­–ç•¥ï¼Œä»»ä¸€æˆåŠŸå³åœæ­¢ï¼Œå¦åˆ™æŠ¥é”™</li> </ol> <p>é€šè¿‡ä¸€é“è¯æ˜é¢˜æ¥è¯´æ˜è¿™äº›ç­–ç•¥çš„ç”¨æ³•ï¼š</p> <div class=highlight><pre><span></span><code><span class=c1>-- é€æ­¥è¯æ˜ 2 â‰¤ 6</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>â‰¤</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=w> </span><span class=c1>-- 2 â‰¤ 5</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=w> </span><span class=c1>-- 2 â‰¤ 4</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=w> </span><span class=c1>-- 2 â‰¤ 3</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=w> </span><span class=c1>-- 2 â‰¤ 2</span>
<span class=w>  </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_refl</span><span class=w> </span><span class=c1>-- å®Œæˆè¯æ˜</span>

<span class=c1>-- âŒ å•ç‹¬ä½¿ç”¨ repeat æ— æ³•å®Œæˆè¯æ˜</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>â‰¤</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>repeat</span><span class=w> </span><span class=o>(</span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=o>)</span>

<span class=c1>-- âœ… ç»„åˆä½¿ç”¨ repeat å’Œ first å®Œæˆè¯æ˜</span>
<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>â‰¤</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>repeat</span><span class=w> </span><span class=o>(</span><span class=n>first</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_refl</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=n>Nat.le_step</span><span class=o>)</span>
</code></pre></div> <p><code>repeat</code> è¿™ä¸€é•¿ä¸²æ˜¾ç„¶ä¸å¤ªä¼˜é›…ï¼Œä¸ºäº†ç®€åŒ–ç±»ä¼¼çš„è¯æ˜è¿‡ç¨‹ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå…ƒç­–ç•¥ï¼š</p> <div class=highlight><pre><span></span><code><span class=sd>/-- </span>
<span class=sd>é‡å¤åº”ç”¨ä¸¤ä¸ªç­–ç•¥ç›´åˆ°è¯æ˜å®Œæˆ</span>
<span class=sd>å‚æ•°ï¼š</span>
<span class=sd>- tâ‚: ç¬¬ä¸€ä¸ªè¦åº”ç”¨çš„å®šç†</span>
<span class=sd>- tâ‚‚: ç¬¬äºŒä¸ªè¦åº”ç”¨çš„å®šç†</span>
<span class=sd>-/</span>
<span class=n>macro</span><span class=w> </span><span class=s2>&quot;repeat_apply&quot;</span><span class=w> </span><span class=n>tâ‚</span><span class=o>:</span><span class=n>term</span><span class=w> </span><span class=s2>&quot;or&quot;</span><span class=w> </span><span class=n>tâ‚‚</span><span class=o>:</span><span class=n>term</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>tactic</span><span class=w> </span><span class=bp>=&gt;</span><span class=w> </span>
<span class=w>  </span><span class=bp>`</span><span class=o>(</span><span class=n>tactic</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>repeat</span><span class=w> </span><span class=o>(</span><span class=n>first</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=bp>$</span><span class=n>tâ‚</span><span class=w> </span><span class=bp>|</span><span class=w> </span><span class=n>apply</span><span class=w> </span><span class=bp>$</span><span class=n>tâ‚‚</span><span class=o>))</span>
</code></pre></div> <p>å°†å†…å®¹å†™å…¥ <code>MyTactics/Basic.lean</code> æ–‡ä»¶ï¼Œå¹¶åœ¨ <code>MyTactics.lean</code> ä¸­å¯¼å…¥ï¼š</p> <div class=highlight><pre><span></span><code><span class=kn>import</span><span class=w> </span><span class=n>MyTactics.Basic</span>
</code></pre></div> <p>ä¹‹åé€šè¿‡ <code>import MyTactics</code> å³å¯åœ¨å…¶ä»–æ–‡ä»¶ä¸­ä½¿ç”¨è¯¥ç­–ç•¥ã€‚</p> <p><strong>ä½¿ç”¨ç¤ºä¾‹</strong></p> <p>ç°åœ¨ï¼Œå‰è¾¹çš„ä¾‹å­å¯ä»¥è¿™æ ·å†™ï¼š</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>2</span><span class=w> </span><span class=bp>â‰¤</span><span class=w> </span><span class=mi>6</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>repeat_apply</span><span class=w> </span><span class=n>Nat.le_refl</span><span class=w> </span><span class=n>or</span><span class=w> </span><span class=n>Nat.le_step</span>
</code></pre></div> <p>æˆ–è€…ç”¨äºè¯æ˜å…¶ä»–ç±»ä¼¼å¼å­ï¼š</p> <div class=highlight><pre><span></span><code><span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>30</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=mi>39</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>repeat_apply</span><span class=w> </span><span class=n>Nat.le_refl</span><span class=w> </span><span class=n>or</span><span class=w> </span><span class=n>Nat.le_step</span>

<span class=kd>example</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=mi>30</span><span class=w> </span><span class=bp>&lt;</span><span class=w> </span><span class=mi>40</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=kd>by</span>
<span class=w>  </span><span class=n>repeat_apply</span><span class=w> </span><span class=n>Nat.succ_le_succ</span><span class=w> </span><span class=n>or</span><span class=w> </span><span class=n>Nat.zero_le</span>
</code></pre></div> <h3 id=_11>å°ç»“<a class=headerlink href=#_11 title="Permanent link">&para;</a></h3> <p>æˆ‘ä»¬æ¼”ç¤ºäº†ä¸‰ä¸ªä¾‹å­ï¼š</p> <ol> <li>Hello World ç¨‹åºï¼š<code>Hello/Greet.lean</code></li> <li>å¦‚ä½•å¤„ç†ç”¨æˆ·è¾“å…¥ï¼š<code>Demo.lean</code></li> <li>å…ƒç­–ç•¥ç¤ºä¾‹ï¼š<code>MyTactics/Basic.lean</code></li> </ol> <h2 id=_12>æµ‹è¯•ï¼Œè‡ªåŠ¨åŒ–åŠå‘å¸ƒ<a class=headerlink href=#_12 title="Permanent link">&para;</a></h2> <h3 id=_13>æµ‹è¯•é…ç½®<a class=headerlink href=#_13 title="Permanent link">&para;</a></h3> <p>æœ€åŸºæœ¬çš„æµ‹è¯•é…ç½®æ˜¯åœ¨ <code>lakefile.lean</code> ä¸­ä½¿ç”¨ <code>@[test_driver]</code> æ ‡è®°æµ‹è¯•æ¨¡å—ã€‚</p> <p>æ¯”å¦‚æ ‡è®° <code>lean_exe</code> æ¨¡å—ï¼š</p> <div class=highlight><pre><span></span><code><span class=kd>@[</span><span class=n>test_driver</span><span class=kd>]</span>
<span class=n>lean_exe</span><span class=w> </span><span class=n>test</span><span class=w> </span><span class=o>{</span>
<span class=w>  </span><span class=n>root</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=ss>`Tests.Main</span>
<span class=o>}</span>
</code></pre></div> <p>ç„¶ååœ¨ <code>Tests/Main.lean</code> ä¸­å®ç°æµ‹è¯•é€»è¾‘ï¼š</p> <div class=highlight><pre><span></span><code><span class=kd>def</span><span class=w> </span><span class=n>main</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>IO</span><span class=w> </span><span class=n>Unit</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=k>do</span>
<span class=w>  </span><span class=c1>-- æµ‹è¯•ç”¨ä¾‹å®ç°</span>
<span class=w>  </span><span class=n>IO.println</span><span class=w> </span><span class=s2>&quot;Running tests...&quot;</span>
<span class=w>  </span><span class=c1>-- æµ‹è¯•ä»£ç </span>
</code></pre></div> <p>ä½¿ç”¨ <code>lake test</code> å‘½ä»¤è¿è¡Œæ‰€æœ‰æ ‡è®°ä¸ºæµ‹è¯•çš„æ¨¡å—ã€‚</p> <p>æ­¤å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç¼–å†™ shell è„šæœ¬ï¼ŒREPL é¡¹ç›®å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰ç”¨äº Lean æµ‹è¯•çš„é¡¹ç›® <a href=https://github.com/argumentcomputer/LSpec>LSpec</a>ï¼Œåç»­å†è¿›ä¸€æ­¥æ¢ç´¢ã€‚</p> <h3 id=_14>è‡ªåŠ¨åŒ–<a class=headerlink href=#_14 title="Permanent link">&para;</a></h3> <p>è‡ªåŠ¨åŒ–æ–¹é¢ï¼Œè¿™é‡Œè´´ä¸€ä¸ª GitHub Workflow ä¾›å‚è€ƒã€‚å½“å‘ <code>main</code> åˆ†æ”¯æäº¤ PR æˆ–è€…æ¨é€ä»£ç æ—¶è§¦å‘ã€‚</p> <div class=highlight><pre><span></span><code><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Run Tests</span>

<span class=nt>on</span><span class=p>:</span>
<span class=w>  </span><span class=nt>push</span><span class=p>:</span>
<span class=w>    </span><span class=nt>branches</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">main</span>
<span class=w>  </span><span class=nt>pull_request</span><span class=p>:</span>
<span class=w>    </span><span class=nt>branches</span><span class=p>:</span>
<span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">main</span>

<span class=nt>jobs</span><span class=p>:</span>
<span class=w>  </span><span class=nt>test</span><span class=p>:</span>
<span class=w>    </span><span class=nt>runs-on</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ubuntu-latest</span>
<span class=w>    </span><span class=nt>steps</span><span class=p>:</span>
<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Checkout code</span>
<span class=w>      </span><span class=nt>uses</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">actions/checkout@v2</span>

<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">install elan</span>
<span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
<span class=w>        </span><span class=no>set -o pipefail</span>
<span class=w>        </span><span class=no>curl -sSfL https://github.com/leanprover/elan/releases/download/v4.0.0/elan-x86_64-unknown-linux-gnu.tar.gz | tar xz</span>
<span class=w>        </span><span class=no>./elan-init -y --default-toolchain none</span>
<span class=w>        </span><span class=no>echo &quot;$HOME/.elan/bin&quot; &gt;&gt; $GITHUB_PATH</span>

<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">build</span>
<span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">lake build</span>

<span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Run tests</span>
<span class=w>      </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">lake test</span>
</code></pre></div> <h3 id=_15>é¡¹ç›®å‘å¸ƒ<a class=headerlink href=#_15 title="Permanent link">&para;</a></h3> <p>ç›®å‰ Lean ç”Ÿæ€ç³»ç»Ÿè¿˜æ²¡æœ‰ç±»ä¼¼ Python çš„ PyPI è¿™æ ·çš„åŒ…æ³¨å†Œè¡¨ï¼Œæ— æ³•é€šè¿‡ç±»ä¼¼ <code>pip install</code> çš„æ–¹å¼ç›´æ¥å®‰è£…åŒ…ã€‚Lean é¡¹ç›®ä¸»è¦é€šè¿‡ GitHub æ‰˜ç®¡å’Œåˆ†å‘ï¼Œä½¿ç”¨ git æ–¹å¼æ‹‰å–ä¾èµ–ã€‚</p> <p>ä½†æ˜¯ç¤¾åŒºæœ‰ä¸ª <a href=https://reservoir.lean-lang.org/ >Reservoir ç½‘ç«™</a> ä½œä¸ºåŒ…ç´¢å¼•å¹³å°ï¼Œæä¾›åŒ…çš„é›†ä¸­å±•ç¤ºã€æ„å»ºæµ‹è¯•å’Œå…¼å®¹æ€§éªŒè¯ã€‚æ”¶å½•é¡¹ç›®éœ€æ»¡è¶³ï¼š</p> <ol> <li>å…¬å¼€çš„åŸåˆ› GitHub ä»“åº“ï¼ˆä¸æ¥å— fork æˆ–æ¨¡æ¿ç”Ÿæˆï¼‰</li> <li>æ ¹ç›®å½•åŒ…å« <code>lake-manifest.json</code> æ–‡ä»¶</li> <li>ä½¿ç”¨ OSI è®¤è¯çš„å¼€æºè®¸å¯è¯</li> <li>GitHub ä»“åº“è‡³å°‘è·å¾— 2 ä¸ªæ˜Ÿæ ‡</li> </ol> <p>å¦‚æœé¡¹ç›®æ»¡è¶³è¿™äº›æ¡ä»¶ï¼Œå¯ä»¥é€šè¿‡åœ¨ Reservoir ä»“åº“æäº¤ issue ç”³è¯·æ”¶å½•ï¼Œå¢åŠ é¡¹ç›®åœ¨ç¤¾åŒºçš„æ›å…‰åº¦ã€‚</p> <p>ä»¥ä¸Šï¼Œæ¬¢è¿è®¨è®ºäº¤æµï½</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>