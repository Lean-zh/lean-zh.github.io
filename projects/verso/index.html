<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://leanprover.cn/projects/verso/ rel=canonical><link rel=prev href=../..><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.20"><title>Verso 教程 - Lean Prover 中文文档</title><link rel=stylesheet href=../../assets/stylesheets/main.e53b48f4.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../assets/css/admonition-custom.css><link rel=stylesheet href=../../assets/css/custom.css><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=green data-md-color-accent=light-green> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#verso-lean class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../.. title="Lean Prover 中文文档" class="md-header__button md-logo" aria-label="Lean Prover 中文文档" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Lean Prover 中文文档 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Verso 教程 </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Lean-zh/Lean-zh.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Lean-zh </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../.. class=md-tabs__link> 主页 </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> 项目教程 </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="Lean Prover 中文文档" class="md-nav__button md-logo" aria-label="Lean Prover 中文文档" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Lean Prover 中文文档 </label> <div class=md-nav__source> <a href=https://github.com/Lean-zh/Lean-zh.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg> </div> <div class=md-source__repository> Lean-zh </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex=0> <span class=md-ellipsis> 主页 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> 主页 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../.. class=md-nav__link> <span class=md-ellipsis> Lean-zh </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> 项目教程 </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> 项目教程 </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Verso 教程 </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Verso 教程 </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 1 体裁 </span> </a> </li> <li class=md-nav__item> <a href=#verso-markup class=md-nav__link> <span class=md-ellipsis> 2 Verso 标记语言 </span> </a> <nav class=md-nav aria-label="2 Verso 标记语言"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> <span class=md-ellipsis> 2.1 设计原则 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 语法 </span> </a> <nav class=md-nav aria-label="2.2 语法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#221 class=md-nav__link> <span class=md-ellipsis> 2.2.1 文档结构 </span> </a> </li> <li class=md-nav__item> <a href=#221_1 class=md-nav__link> <span class=md-ellipsis> 2.2.1 块语法 </span> </a> <nav class=md-nav aria-label="2.2.1 块语法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#2221 class=md-nav__link> <span class=md-ellipsis> 2.2.2.1. 列表 </span> </a> </li> <li class=md-nav__item> <a href=#2222-quotes class=md-nav__link> <span class=md-ellipsis> 2.2.2.2. 引用（Quotes） </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#223-inline-syntax class=md-nav__link> <span class=md-ellipsis> 2.2.3 行内语法（Inline Syntax） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23-markdown class=md-nav__link> <span class=md-ellipsis> 2.3 与 Markdown 的差异 </span> </a> <nav class=md-nav aria-label="2.3 与 Markdown 的差异"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#231 class=md-nav__link> <span class=md-ellipsis> 2.3.1 语法错误 </span> </a> </li> <li class=md-nav__item> <a href=#232 class=md-nav__link> <span class=md-ellipsis> 2.3.2 减少前瞻 </span> </a> </li> <li class=md-nav__item> <a href=#233 class=md-nav__link> <span class=md-ellipsis> 2.3.3 标题嵌套 </span> </a> </li> <li class=md-nav__item> <a href=#234 class=md-nav__link> <span class=md-ellipsis> 2.3.4 体裁特定扩展 </span> </a> </li> <li class=md-nav__item> <a href=#235 class=md-nav__link> <span class=md-ellipsis> 2.3.5 移除少用特性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 构建文档 </span> </a> <nav class=md-nav aria-label=构建文档> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-elaboration class=md-nav__link> <span class=md-ellipsis> 3.1 阐释（Elaboration） </span> </a> </li> <li class=md-nav__item> <a href=#32-compilation class=md-nav__link> <span class=md-ellipsis> 3.2 编译（Compilation） </span> </a> </li> <li class=md-nav__item> <a href=#33-traversal class=md-nav__link> <span class=md-ellipsis> 3.3 遍历（Traversal） </span> </a> </li> <li class=md-nav__item> <a href=#34-output-generation class=md-nav__link> <span class=md-ellipsis> 3.4 生成输出（Output Generation） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 扩展 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 输出格式 </span> </a> <nav class=md-nav aria-label=输出格式> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51-html class=md-nav__link> <span class=md-ellipsis> 5.1 HTML </span> </a> </li> <li class=md-nav__item> <a href=#52-tex class=md-nav__link> <span class=md-ellipsis> 5.2 TeX </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 网页 </span> </a> <nav class=md-nav aria-label=网页> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-blogmain class=md-nav__link> <span class=md-ellipsis> 6.1 生成站点（blogMain） </span> </a> </li> <li class=md-nav__item> <a href=#62-sitedirpagepost class=md-nav__link> <span class=md-ellipsis> 6.2 配置站点（Site/Dir/Page/Post） </span> </a> </li> <li class=md-nav__item> <a href=#63-themetemplate class=md-nav__link> <span class=md-ellipsis> 6.3 主题与模板（Theme/Template） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 手册和书 </span> </a> <nav class=md-nav aria-label=手册和书> <ul class=md-nav__list> <li class=md-nav__item> <a href=#71-tags-references class=md-nav__link> <span class=md-ellipsis> 7.1 标签与引用（Tags &amp; References） </span> </a> </li> <li class=md-nav__item> <a href=#72-paragraph class=md-nav__link> <span class=md-ellipsis> 7.2 段落指令（paragraph） </span> </a> </li> <li class=md-nav__item> <a href=#73-docstring class=md-nav__link> <span class=md-ellipsis> 7.3 Docstring 与选项文档 </span> </a> </li> <li class=md-nav__item> <a href=#74-deftechtech class=md-nav__link> <span class=md-ellipsis> 7.4 术语（deftech/tech） </span> </a> </li> <li class=md-nav__item> <a href=#75-oss-licenses class=md-nav__link> <span class=md-ellipsis> 7.5 开源许可证（OSS Licenses） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 索引 依赖项 （请参考原文） </span> </a> </li> <li class=md-nav__item> <a href=#markup-example class=md-nav__link> <span class=md-ellipsis> 附：标记示例（markup-example） </span> </a> </li> <li class=md-nav__item> <a href=#namedocs class=md-nav__link> <span class=md-ellipsis> 附：命名文档块（namedocs）摘要 </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#1 class=md-nav__link> <span class=md-ellipsis> 1 体裁 </span> </a> </li> <li class=md-nav__item> <a href=#verso-markup class=md-nav__link> <span class=md-ellipsis> 2 Verso 标记语言 </span> </a> <nav class=md-nav aria-label="2 Verso 标记语言"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#21 class=md-nav__link> <span class=md-ellipsis> 2.1 设计原则 </span> </a> </li> <li class=md-nav__item> <a href=#22 class=md-nav__link> <span class=md-ellipsis> 2.2 语法 </span> </a> <nav class=md-nav aria-label="2.2 语法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#221 class=md-nav__link> <span class=md-ellipsis> 2.2.1 文档结构 </span> </a> </li> <li class=md-nav__item> <a href=#221_1 class=md-nav__link> <span class=md-ellipsis> 2.2.1 块语法 </span> </a> <nav class=md-nav aria-label="2.2.1 块语法"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#2221 class=md-nav__link> <span class=md-ellipsis> 2.2.2.1. 列表 </span> </a> </li> <li class=md-nav__item> <a href=#2222-quotes class=md-nav__link> <span class=md-ellipsis> 2.2.2.2. 引用（Quotes） </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#223-inline-syntax class=md-nav__link> <span class=md-ellipsis> 2.2.3 行内语法（Inline Syntax） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#23-markdown class=md-nav__link> <span class=md-ellipsis> 2.3 与 Markdown 的差异 </span> </a> <nav class=md-nav aria-label="2.3 与 Markdown 的差异"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#231 class=md-nav__link> <span class=md-ellipsis> 2.3.1 语法错误 </span> </a> </li> <li class=md-nav__item> <a href=#232 class=md-nav__link> <span class=md-ellipsis> 2.3.2 减少前瞻 </span> </a> </li> <li class=md-nav__item> <a href=#233 class=md-nav__link> <span class=md-ellipsis> 2.3.3 标题嵌套 </span> </a> </li> <li class=md-nav__item> <a href=#234 class=md-nav__link> <span class=md-ellipsis> 2.3.4 体裁特定扩展 </span> </a> </li> <li class=md-nav__item> <a href=#235 class=md-nav__link> <span class=md-ellipsis> 2.3.5 移除少用特性 </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_1 class=md-nav__link> <span class=md-ellipsis> 构建文档 </span> </a> <nav class=md-nav aria-label=构建文档> <ul class=md-nav__list> <li class=md-nav__item> <a href=#31-elaboration class=md-nav__link> <span class=md-ellipsis> 3.1 阐释（Elaboration） </span> </a> </li> <li class=md-nav__item> <a href=#32-compilation class=md-nav__link> <span class=md-ellipsis> 3.2 编译（Compilation） </span> </a> </li> <li class=md-nav__item> <a href=#33-traversal class=md-nav__link> <span class=md-ellipsis> 3.3 遍历（Traversal） </span> </a> </li> <li class=md-nav__item> <a href=#34-output-generation class=md-nav__link> <span class=md-ellipsis> 3.4 生成输出（Output Generation） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_2 class=md-nav__link> <span class=md-ellipsis> 扩展 </span> </a> </li> <li class=md-nav__item> <a href=#_3 class=md-nav__link> <span class=md-ellipsis> 输出格式 </span> </a> <nav class=md-nav aria-label=输出格式> <ul class=md-nav__list> <li class=md-nav__item> <a href=#51-html class=md-nav__link> <span class=md-ellipsis> 5.1 HTML </span> </a> </li> <li class=md-nav__item> <a href=#52-tex class=md-nav__link> <span class=md-ellipsis> 5.2 TeX </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_4 class=md-nav__link> <span class=md-ellipsis> 网页 </span> </a> <nav class=md-nav aria-label=网页> <ul class=md-nav__list> <li class=md-nav__item> <a href=#61-blogmain class=md-nav__link> <span class=md-ellipsis> 6.1 生成站点（blogMain） </span> </a> </li> <li class=md-nav__item> <a href=#62-sitedirpagepost class=md-nav__link> <span class=md-ellipsis> 6.2 配置站点（Site/Dir/Page/Post） </span> </a> </li> <li class=md-nav__item> <a href=#63-themetemplate class=md-nav__link> <span class=md-ellipsis> 6.3 主题与模板（Theme/Template） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_5 class=md-nav__link> <span class=md-ellipsis> 手册和书 </span> </a> <nav class=md-nav aria-label=手册和书> <ul class=md-nav__list> <li class=md-nav__item> <a href=#71-tags-references class=md-nav__link> <span class=md-ellipsis> 7.1 标签与引用（Tags &amp; References） </span> </a> </li> <li class=md-nav__item> <a href=#72-paragraph class=md-nav__link> <span class=md-ellipsis> 7.2 段落指令（paragraph） </span> </a> </li> <li class=md-nav__item> <a href=#73-docstring class=md-nav__link> <span class=md-ellipsis> 7.3 Docstring 与选项文档 </span> </a> </li> <li class=md-nav__item> <a href=#74-deftechtech class=md-nav__link> <span class=md-ellipsis> 7.4 术语（deftech/tech） </span> </a> </li> <li class=md-nav__item> <a href=#75-oss-licenses class=md-nav__link> <span class=md-ellipsis> 7.5 开源许可证（OSS Licenses） </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#_6 class=md-nav__link> <span class=md-ellipsis> 索引 依赖项 （请参考原文） </span> </a> </li> <li class=md-nav__item> <a href=#markup-example class=md-nav__link> <span class=md-ellipsis> 附：标记示例（markup-example） </span> </a> </li> <li class=md-nav__item> <a href=#namedocs class=md-nav__link> <span class=md-ellipsis> 附：命名文档块（namedocs）摘要 </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=verso-lean>使用 Verso 在 Lean 中编写文档<a class=headerlink href=#verso-lean title="Permanent link">&para;</a></h1> <p>原文：<a href=https://github.com/leanprover/verso>https://github.com/leanprover/verso</a></p> <p>作者：David Thrane Christiansen 译者：子鱼 <a href=mailto:subfishzhou@gmail.com>&#115;&#117;&#98;&#102;&#105;&#115;&#104;&#122;&#104;&#111;&#117;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></p> <p>Verso 是用于撰写 Lean 文档的构建框架+具体工具。 你可以使用它来实现多种技术文档，包括但不限于：</p> <ul> <li>参考手册</li> <li>教程</li> <li>网页</li> <li>学术论文</li> </ul> <p>它能够显示 Lean 代码、提供测试以避免文档年久失修、提供超链接等。它能够支持线性或交叉引用错综的文档结构，提供交互，以及导出PDF。</p> <p>Verso由以下组件构成：</p> <p><strong><a href=#verso-markup>标记语言</a></strong> 一种 Markdown 的简化变体，同时是 Lean 本身的另一种具体语法，因此 Verso 文档也是 Lean 文件。正如 TeX、Sphinx 和 Scribble 允许使用自己的编程语言扩展他们的语言一样，Verso 的标记语言是可扩展的。你可以在文件顶部定义一个 Lean 函数，随后在该文件的文本中使用它。</p> <p><strong>可扩展的文档结构</strong> 所有 Verso 文档都可以包含一组通用元素，例如章节层级，例如段落、粗体字或图像。这些类型可按各个体裁进行扩展。</p> <p><strong>阐释（Elaboration）和渲染框架</strong> Verso为作者提供的文本转换至可读输出建立了一套共享范式。不同体裁将生成不同的输出格式，但无需重复实现交叉引用解析功能，并能受益于共享库实现多格式输出。</p> <p><strong>交叉引用管理</strong> Verso包含：用于表示文档化项目的通用范式，以及在HTML输出体裁间共享交叉引用数据库的格式。这使得链接与交叉引用能够自动插入和维护。</p> <p><strong>Lean代码渲染</strong> Verso具备阐释和展示文档中Lean代码的功能。在HTML输出中，该代码呈现为可切换的证明状态、悬停提示和超链接形式。得益于精准的语法高亮（基于正则表达式的方法因Lean语法可扩展性而无法实现），代码显示更加清晰。</p> <p>通过 <a href=https://github.com/leanprover/subverso>SubVerso</a> 辅助库，Verso文档可处理自Lean 4.0.0起任何版本的Lean代码。这使文档能够进行版本对比分析，并实现项目所用Lean版本与说明文档所用Lean版本的解耦升级。</p> <p><strong>工具库</strong> Verso包含可供各体裁使用的工具库，提供诸如HTML内容全文检索等功能。这些库无需额外构建时依赖，避免了同时维护多个库生态系统带来的复杂性。</p> <h2 id=1>1 体裁<a class=headerlink href=#1 title="Permanent link">&para;</a></h2> <p>没有什么系统可以完美支持所有文档体裁。软件手册作者的需求与教科书、论文、博主或者诗人的需求不同。因此 Verso 支持多种体裁，提供功能：</p> <ul> <li>文档结构的全局视图，无论是带有小节的文档、相互链接的文档集合（如网站）还是单个文本文件</li> <li>跨越整个文档的状态表示，例如对图表的交叉引用、索引条目和命名定理</li> <li>文档结构的补充 —— 例如，博客体裁支持包含原始 HTML，而手册体裁支持将多个顶层区块组合成一个逻辑段落</li> <li>处理交叉引用和将文档渲染为一个或多个输出格式的程序</li> </ul> <p>所有体裁使用相同的标记语法，并且可以共享不依赖于不兼容结构扩展的标记语言扩展。混合不兼容的功能会导致普通的 Lean 类型错误。</p> <h2 id=verso-markup>2 Verso 标记语言<a class=headerlink href=#verso-markup title="Permanent link">&para;</a></h2> <p>Lean 的文档标记语言与 Markdown 密切相关，但并非完全相同。</p> <h3 id=21>2.1 设计原则<a class=headerlink href=#21 title="Permanent link">&para;</a></h3> <ul> <li> <p><strong>语法错误</strong> 应该尽早失败（fail fast），而不是产生意外的输出或依赖复杂规则。</p> </li> <li> <p><strong>减少前瞻</strong> 解析应尽可能局部地成功或失败。</p> </li> <li> <p><strong>可扩展性</strong> 应该有专门的机制来组合式地添加新内容，而不是依赖一堆临时性的文本子格式。</p> </li> <li> <p><strong>默认支持 Unicode</strong> Lean 用户已经习惯直接输入 Unicode，并且有良好的工具支持，因此没有必要支持其他替代文本语法来输入键盘上没有的字符（例如破折号或印刷引号）。</p> </li> <li> <p><strong>Markdown 兼容性</strong> 在不违反上述原则的前提下，用户能够从已有的肌肉记忆和熟悉度中获益。</p> </li> </ul> <h3 id=22>2.2 语法<a class=headerlink href=#22 title="Permanent link">&para;</a></h3> <p>与 Markdown 类似，Lean 的标记语法有三大主要类别：</p> <ul> <li> <p><strong>文档结构</strong> 标题、脚注定义和命名链接为文档提供更丰富的结构。它们不能嵌套在区块内。</p> </li> <li> <p><strong>区块元素</strong> 书面文本的主要组织方式，包括段落、列表和引用。部分区块可以嵌套：例如，列表可以包含其他列表。</p> </li> <li> <p><strong>内联元素</strong> 书面文本的普通内容，如正文、加粗或强调文本，以及超链接。</p> </li> </ul> <h4 id=221>2.2.1 文档结构<a class=headerlink href=#221 title="Permanent link">&para;</a></h4> <p>文档被组织为若干部分。一个部分是文档内容的逻辑划分，例如章节、小节或卷。部分可以附带元数据，例如作者、发布日期、用于交叉引用的内部标识符或期望的 URL；具体的元数据由文档体裁决定。</p> <p>一个部分包含一系列区块，接着是一系列子部分，两者都可以为空。</p> <p>一个部分由标题引入。标题由行首一个或多个井号（<code>#</code>）加上一系列内联元素组成。井号的数量表示标题的层级，井号越多表示层级越低。低层级标题引入前一标题的子部分，而层级不低于前一标题的标题会结束该部分。换句话说，标题层级为文档引入一棵树形结构。</p> <p>标题必须正确嵌套：文档中的第一个标题必须恰好有一个井号，之后的标题最多只能比前一个标题多一个井号。这是语法上的要求：无论 Verso 文件包含的是整本书、一章，还是仅一个小节，其最外层标题必须以单个井号引入。标题表示的是文档的逻辑层级结构，而不是文档渲染为 HTML 等输出格式时所选择的标题样式。</p> <p>标题后可以跟随一个元数据块来为其附加元数据。元数据块以 <code>%%%</code> 开始和结束，内部可以包含任何在 Lean 结构初始化器中可接受的语法。</p> <div class="admonition blue"> <p class=admonition-title>标题</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=gh># 顶级标题</span>
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>h1</span><span class=p>&gt;</span>顶级标题<span class=p>&lt;/</span><span class=nt>h1</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>文本</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>a b c
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>a b c<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h4 id=221_1>2.2.1 块语法<a class=headerlink href=#221_1 title="Permanent link">&para;</a></h4> <p>段落是未修饰的：任何不是另一个块的内联序列都是段落。 段落一直持续到空白行（即仅包含空格的行）或另一个块开头：</p> <div class="admonition blue"> <p class=admonition-title>段落</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>This is one paragraph.
Even though this sentence is on a
new line, the paragraph continues.

This is a new paragraph.
<span class=k>*</span><span class=w> </span>This list stopped the paragraph.
<span class=k>*</span><span class=w> </span>As in Markdown and SGML, lists
are not part of paragraphs.
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
    This is one paragraph. Even
    though this sentence is on a new
    line, the paragraph continues.
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> This is a new paragraph. <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            This list stopped the
            paragraph.
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            As in Markdown and SGML,
            lists   are not part of
            paragraphs.
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h5 id=2221>2.2.2.1. 列表<a class=headerlink href=#2221 title="Permanent link">&para;</a></h5> <p>有三种类型的列表：</p> <p><strong>无序列表</strong> 项的顺序不重要。对应于 HTML 中的 <code>&lt;ul&gt;</code> 或 LaTeX 中的 <code>\begin{itemize}</code>。</p> <p><strong>有序列表</strong> 项的顺序很重要。对应于 HTML 中的 <code>&lt;ol&gt;</code> 或 LaTeX 中的 <code>\begin{enumerate}</code>。</p> <p><strong>描述列表</strong> 描述列表将术语与更多信息相关联。对应于 HTML 中的 <code>&lt;dl&gt;</code> 或 LaTeX 中的 <code>\begin{description}</code></p> <p>以零个或多个空格开头，后跟 <code>*</code>、<code>-</code> 或 <code>+</code> 表示列表项的行。此些字符称为列表项指示符。相同的指示符加上相同的缩进表明它们是同一列表层级，更多的缩进表示某项下的子项；项可能包含多个块，甚至其他列表。</p> <div class="admonition blue"> <p class=admonition-title>无序列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>*</span><span class=w> </span>含两个项目的列表
<span class=k>*</span><span class=w> </span>都从第0列开头
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 含两个项目的列表 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
        都从第0列开头
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>列表指示符</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>*</span><span class=w> </span>两个列表
+ 带有不同的指示符
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 两个列表 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            带有不同的指示符
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>列表对缩进敏感</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>*</span><span class=w> </span>一个含一个项目的列表
<span class=k>*</span><span class=w> </span>另一个列表，因为用了不同的指示符
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            一个含一个项目的列表
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            另一个列表，因为用了不同的指示符
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>子列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>*</span><span class=w> </span>单项列表
  也涵盖这一段

<span class=w>  </span><span class=k>*</span><span class=w> </span>这是子列表

  也涵盖这一段
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            单项列表   也涵盖这一段
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
            <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            这是子列表
            <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            也涵盖这一段
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>有序列表项由“零个或多个空格 + 一串数字 + 指示符（<code>.</code> 或 <code>)</code>）”起始。与无序列表相同，有序列表也对缩进与指示符敏感：相同缩进与相同指示符归为同一列表层级。</p> <div class="admonition blue"> <p class=admonition-title>有序列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>1.</span> 首先写一个数字
<span class=k>2.</span> 然后写指示符（`.` 或 <span class=sb>`)`</span>）
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ol</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 首先写一个数字 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            然后写指示符
            (&quot;.&quot; 或 &quot;)&quot;)
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ol</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>有序列表与指示符</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>1.</span> 两个列表
2) 它们使用不同的指示符
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ol</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 两个列表 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ol</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>ol</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>
        <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
            它们使用不同的指示符
        <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
    <span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ol</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>描述列表由若干“描述项”组成，具有相同缩进。一个描述项的第一行以“零个或多个空格 + 冒号 <code>:</code> + 一串行内元素”构成，随后必须有一行空行，然后跟随一个或多个缩进严格大于冒号位置的块。</p> <div class="admonition blue"> <p class=admonition-title>描述列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>: 项目 1

  项目 1 的说明

: 项目 2

  项目 2 的说明
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>dl</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>  项目 1 <span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 项目 1 的说明 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>

  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>  项目 2 <span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dd</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span> 项目 2 的说明 <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>dl</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h5 id=2222-quotes>2.2.2.2. 引用（Quotes）<a class=headerlink href=#2222-quotes title="Permanent link">&para;</a></h5> <p>引用块表示一组块是由作者以外的人说的。其语法为：一行以“零个或多个空格 + 大于号 <code>&gt;</code>”起始，随后必须跟随缩进严格大于该 <code>&gt;</code> 的一个或多个块，这些块共同组成引用内容。</p> <div class="admonition blue"> <p class=admonition-title>引用</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>It is said that:
<span class=k>&gt; </span><span class=ge>Quotations are excellent.</span>

  This paragraph is part of the
  quotation.

 So is this one.

But not this one.
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> It is said that: <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>blockquote</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> Quotations are excellent. <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
    This paragraph is part of the
    quotation.
  <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> So is this one. <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>blockquote</span><span class=p>&gt;</span>

<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> But not this one. <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h3 id=223-inline-syntax>2.2.3 行内语法（Inline Syntax）<a class=headerlink href=#223-inline-syntax title="Permanent link">&para;</a></h3> <p>强调（emphasis）使用下划线 <code>_</code>：</p> <div class="admonition blue"> <p class=admonition-title>强调</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>Here&#39;s some <span class=ge>_emphasized_</span> text
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  Here&#39;s some
  <span class=p>&lt;</span><span class=nt>emph</span><span class=p>&gt;</span> emphasized <span class=p>&lt;/</span><span class=nt>emph</span><span class=p>&gt;</span> text
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>外层使用更多下划线可形成“嵌套强调”：</p> <div class="admonition blue"> <p class=admonition-title>嵌套强调</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>Here&#39;s some __emphasized text
with <span class=ge>_extra_</span> emphasis__ inside
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  Here&#39;s some
  <span class=p>&lt;</span><span class=nt>emph</span><span class=p>&gt;</span>
    emphasized text with
    <span class=p>&lt;</span><span class=nt>emph</span><span class=p>&gt;</span> extra <span class=p>&lt;/</span><span class=nt>emph</span><span class=p>&gt;</span> emphasis
  <span class=p>&lt;/</span><span class=nt>emph</span><span class=p>&gt;</span>
  inside
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>强强调（粗体，bold）使用星号 <code>*</code>：</p> <div class="admonition blue"> <p class=admonition-title>加粗</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>Here&#39;s some <span class=ge>*bold*</span> text
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  Here&#39;s some <span class=p>&lt;</span><span class=nt>bold</span><span class=p>&gt;</span>bold<span class=p>&lt;/</span><span class=nt>bold</span><span class=p>&gt;</span> text
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>超链接由方括号包裹的链接文本，后接圆括号中的目标：</p> <div class="admonition blue"> <p class=admonition-title>链接</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>[<span class=nt>Lean</span>](<span class=na>https://lean-lang.org</span>)
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;https://lean-lang.org&quot;</span><span class=p>&gt;</span>Lean<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>链接目标也可以命名：</p> <div class="admonition blue"> <p class=admonition-title>命名链接目标</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>The [<span class=nt>Lean website</span>][<span class=nl>lean</span>]

[<span class=nl>lean</span>]: <span class=na>https://lean-lang.org</span>
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  The <span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;(value of «lean»)&quot;</span><span class=p>&gt;</span>Lean website<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

where «lean» := https://lean-lang.org
</code></pre></div> </div> </div></p> </div> <p>行内代码使用反引号。开启与关闭使用相同个数的反引号，且内容不得包含长度不小于分隔符的反引号序列：</p> <div class="admonition blue"> <p class=admonition-title>行内代码</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>The definition of <span class=sb>`main`</span>
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> The definition of <span class=p>&lt;</span><span class=nt>code</span><span class=p>&gt;</span>&quot;main&quot;<span class=p>&lt;/</span><span class=nt>code</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>特殊规则：若行内代码首尾均有一个空格，则表示去掉一前一后的空格后得到的字符串，可用于表示以反引号开头/结尾的值：</p> <div class="admonition blue"> <p class=admonition-title>代码中的空格</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>`` <span class=sb>`quotedName `</span>`
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>code</span><span class=p>&gt;</span>&quot;`quotedName&quot;<span class=p>&lt;/</span><span class=nt>code</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>多个空格的代码</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>``  one space  ``
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>code</span><span class=p>&gt;</span>&quot; one space &quot;<span class=p>&lt;/</span><span class=nt>code</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>图片需要同时提供替代文本与图片地址，也支持命名地址：</p> <div class="admonition blue"> <p class=admonition-title>图片</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>![<span class=nt>Alt text</span>](<span class=na>image.png</span>)
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;image.png&quot;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&quot;Alt text&quot;</span><span class=p>/&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>命名图片地址</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>![Alternative text][image]

[<span class=nl>image</span>]: <span class=na>image.png</span>
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>img</span> <span class=na>src</span><span class=o>=</span><span class=s>&quot;value of «image»&quot;</span> <span class=na>alt</span><span class=o>=</span><span class=s>&quot;Alternative text&quot;</span><span class=p>/&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>

where «image» := image.png
</code></pre></div> </div> </div></p> </div> <p>数学：单个或双个美元符包裹的 TeX 代码。<code>$...$</code> 为行内，<code>$$...$$</code> 为陈列模式：</p> <div class="admonition blue"> <p class=admonition-title>数学</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>$<span class=sb>`\sum_{i=0}^{10} i`</span>$
$$`\sum_{i=0}^{10} i`$$
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;math inline&quot;</span><span class=p>&gt;</span>\sum_{i=0}^{10} i<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nt>span</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;math display&quot;</span><span class=p>&gt;</span>\sum_{i=0}^{10} i<span class=p>&lt;/</span><span class=nt>span</span><span class=p>&gt;</span> <span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <p>角色（role）为后续行内赋予特殊语义。可用于代码阐释、技术术语定义/使用、旁注等。语法：一行内用花括号给出名称与参数，后面紧跟一个“自我定界”的行内元素，或用方括号包裹的若干行内元素。</p> <div class="admonition blue"> <p class=admonition-title>带显式范围的角色</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>{ref &quot;chapter-tag&quot;}[the chapter on
$<span class=sb>`\frac{1}{2}`</span>-powered syntax]
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>ref</span> <span class=err>&quot;</span><span class=na>chapter-tag</span><span class=err>&quot;</span><span class=p>&gt;</span>
    the chapter on
    <span class=p>&lt;</span><span class=nt>math</span> <span class=na>contents</span><span class=o>=</span><span class=s>&quot;\\frac{1}{2}&quot;</span><span class=p>/&gt;</span>
    -powered syntax
  <span class=p>&lt;/</span><span class=nt>ref</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>单参数角色</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>{lean}`2 + f 4`
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>lean</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>code</span><span class=p>&gt;</span>&quot;2 + f 4&quot;<span class=p>&lt;/</span><span class=nt>code</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>lean</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h2 id=23-markdown>2.3 与 Markdown 的差异<a class=headerlink href=#23-markdown title="Permanent link">&para;</a></h2> <h3 id=231>2.3.1 语法错误<a class=headerlink href=#231 title="Permanent link">&para;</a></h3> <p>Markdown 允许一组优先级规则来解释不匹配的分隔符（例如 <code>what _is *bold_ or emph*?</code>），在 Lean 标记中这类情况是语法错误；同样，未闭合的分隔符（如 <code>*</code> 或 <code>_</code>）在 Markdown 中当作普通字符，而 Lean 标记中要求显式转义。长文技术写作更倾向于尽早发现此类错误。</p> <h3 id=232>2.3.2 减少前瞻<a class=headerlink href=#232 title="Permanent link">&para;</a></h3> <p>在 Markdown 中，<code>[this][here]</code> 是否为链接取决于文档中是否定义了 <code>here</code>；在 Lean 标记中它总是链接，若缺失目标则报错。</p> <h3 id=233>2.3.3 标题嵌套<a class=headerlink href=#233 title="Permanent link">&para;</a></h3> <p>Lean 标记认为每个文档都有标题，且强制使用 <code>#</code> 作为最外层标题、<code>##</code> 为下一层，依此类推。这样单文件既可代表节、章乃至整本书，而无需维护全局层级映射。</p> <h3 id=234>2.3.4 体裁特定扩展<a class=headerlink href=#234 title="Permanent link">&para;</a></h3> <p>Markdown 没有标准方式表达特定工具/体裁的概念；Lean 标记提供标准语法以组合式扩展。</p> <h3 id=235>2.3.5 移除少用特性<a class=headerlink href=#235 title="Permanent link">&para;</a></h3> <p>为减少意外并提升可预测性，Verso 去除了少用特性，例如 CommonMark 所区分的“紧凑/宽松列表”等。</p> <h2 id=_1>构建文档<a class=headerlink href=#_1 title="Permanent link">&para;</a></h2> <p>本节简述 Verso 文档从作者到读者的标准流程（不同体裁在细节上会作定制）：</p> <p>1) 使用 Verso 标记语言编写文本，解析为 Lean 的 <code>Syntax</code>。 2) 进行阐释（elaboration），转为对应体裁的 Lean 数据结构。 3) 将生成的 Lean 代码编译为可执行程序。 4) 运行该程序，执行“遍历（traversal）”步骤，解析交叉引用并计算全局元数据。 5) 生成目标输出（HTML/TeX 等）。</p> <h3 id=31-elaboration>3.1 阐释（Elaboration）<a class=headerlink href=#31-elaboration title="Permanent link">&para;</a></h3> <p>阐释把标记语言转换为内部归纳类型，并在遇到扩展点时调用注册的实现。所有文档都以“体裁（genre）”为参数；体裁约定了该文档可用的元数据、块（Block）与行内（Inline）元素等。</p> <div class="admonition green"> <p class=admonition-title>API（体裁定义要点）</p> <div class=highlight><pre><span></span><code><span class=kd>structure</span><span class=w> </span><span class=n>Verso.Doc.Genre</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>PartMetadata</span><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=w>  </span><span class=n>Block</span><span class=w>           </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=w>  </span><span class=n>Inline</span><span class=w>          </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=w>  </span><span class=n>TraverseContext</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=w>  </span><span class=n>TraverseState</span><span class=w>   </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 各体裁需定义：</span>
<span class=c1>-- 1) 自定义块/行内元素类型</span>
<span class=c1>-- 2) 遍历上下文与可变状态</span>
<span class=c1>-- 3) main：组织遍历与输出</span>
</code></pre></div> </div> <h3 id=32-compilation>3.2 编译（Compilation）<a class=headerlink href=#32-compilation title="Permanent link">&para;</a></h3> <p>阐释之后，文档被编译为可执行程序。各体裁提供 <code>main</code> 入口来完成遍历与输出；网站等非线性体裁会额外提供布局/配置方式。常见参数包括输出格式以及渲染自定义项。</p> <div class="admonition blue"> <p class=admonition-title>最小工作流</p> <ul> <li>编译：将阐释后的 Lean 值编译为可执行程序</li> <li>运行：传入命令行/代码参数（输出格式、主题、链接策略等）</li> <li>体裁 <code>main</code>：执行遍历与输出</li> </ul> </div> <h3 id=33-traversal>3.3 遍历（Traversal）<a class=headerlink href=#33-traversal title="Permanent link">&para;</a></h3> <p>遍历在运行期进行，按次序多次遍历文档并累计全局表，例如交叉引用、目录、引用文献等；在达成不再改变的“不动点”前会重复。体裁通过 <code>Traverse</code> 与相关实例说明如何在块/行内级别更新上下文与状态。</p> <div class="admonition green"> <p class=admonition-title>API（遍历接口要点）</p> <div class=highlight><pre><span></span><code><span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.Traverse</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>outParam</span><span class=w> </span><span class=o>(</span><span class=kt>Type</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=kt>Type</span><span class=o>))</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>part</span><span class=w>   </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>           </span><span class=n>Doc.Part</span><span class=w> </span><span class=n>g</span><span class=w>   </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>Unit</span>
<span class=w>  </span><span class=n>block</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>           </span><span class=n>Doc.Block</span><span class=w> </span><span class=n>g</span><span class=w>  </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>Unit</span>
<span class=w>  </span><span class=n>inline</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>           </span><span class=n>Doc.Inline</span><span class=w> </span><span class=n>g</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>Unit</span>

<span class=w>  </span><span class=n>genrePart</span><span class=w>   </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>                </span><span class=n>g.PartMetadata</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Doc.Part</span><span class=w> </span><span class=n>g</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>(</span><span class=n>Option</span><span class=w> </span><span class=o>(</span><span class=n>Doc.Part</span><span class=w> </span><span class=n>g</span><span class=o>))</span>
<span class=w>  </span><span class=n>genreBlock</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>                </span><span class=n>g.Block</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=o>(</span><span class=n>Doc.Block</span><span class=w> </span><span class=n>g</span><span class=o>)</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>(</span><span class=n>Option</span><span class=w> </span><span class=o>(</span><span class=n>Doc.Block</span><span class=w> </span><span class=n>g</span><span class=o>))</span>
<span class=w>  </span><span class=n>genreInline</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=o>[</span><span class=n>MonadReader</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=o>[</span><span class=n>MonadState</span><span class=w> </span><span class=n>g.TraverseState</span><span class=w> </span><span class=n>m</span><span class=o>]</span><span class=w> </span><span class=bp>→</span>
<span class=w>                </span><span class=n>g.Inline</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=o>(</span><span class=n>Doc.Inline</span><span class=w> </span><span class=n>g</span><span class=o>)</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=o>(</span><span class=n>Option</span><span class=w> </span><span class=o>(</span><span class=n>Doc.Inline</span><span class=w> </span><span class=n>g</span><span class=o>))</span>

<span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.TraversePart</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>inPart</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Part</span><span class=w> </span><span class=n>g</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>g.TraverseContext</span>

<span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.TraverseBlock</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=n>inBlock</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Block</span><span class=w> </span><span class=n>g</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>g.TraverseContext</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>g.TraverseContext</span>
</code></pre></div> </div> <div class="admonition blue"> <p class=admonition-title>遍历收敛（固定点）</p> <ul> <li>从文档首到尾，反复遍历直至“文档与状态”均不再变化</li> <li>若连续若干次遍历仍有变化，视为失败（避免无限循环）</li> </ul> </div> <h3 id=34-output-generation>3.4 生成输出（Output Generation）<a class=headerlink href=#34-output-generation title="Permanent link">&para;</a></h3> <p>遍历完成后生成可读版本（各体裁决定支持哪些格式）。输出为 HTML 的体裁通常会序列化交叉引用数据库，供其他文档自动链接。</p> <div class="admonition green"> <p class=admonition-title>API（输出对象）</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.Html</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.TeX</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 常用构造与工具：text / tag / seq / empty / append / asString ...</span>
<span class=c1>-- HTML 体裁可选择输出交叉引用数据库（序列化），供其他文档复用</span>
</code></pre></div> </div> <h2 id=_2>扩展<a class=headerlink href=#_2 title="Permanent link">&para;</a></h2> <p>Verso 的扩展机制允许体裁组合出新的块/行内元素、为阐释与遍历插入逻辑，以及为不同输出后端提供渲染实现。扩展由普通 Lean 代码定义，具备良好的类型约束与可组合性。</p> <ul> <li>可定义自有数据（例如手册体裁的块、行内元素的数据结构），并注册阐释器将标记语法映射到这些数据。</li> <li>在遍历（Traversal）中，扩展可读取/更新体裁状态，建立交叉引用、生成目录、注入永久链接等。</li> <li>为 HTML/TeX 输出实现渲染器，并按需声明额外的静态资源（脚本/CSS/许可证信息）。</li> </ul> <div class="admonition green"> <p class=admonition-title>API（扩展的三个面向）</p> </div> <div class=highlight><pre><span></span><code><span class=c1>-- 1) 数据与阐释：</span>
<span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Manual.Block</span><span class=w>    </span><span class=c1>-- 体裁自定义块</span>
<span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Manual.Inline</span><span class=w>   </span><span class=c1>-- 体裁自定义行内</span>
<span class=c1>-- 注册阐释器：将标记语法 → (Block/Inline) 数据</span>

<span class=c1>-- 2) 遍历：</span>
<span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.Traverse</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>outParam</span><span class=w> </span><span class=o>(</span><span class=kt>Type</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=kt>Type</span><span class=o>))</span>
<span class=c1>-- 通过 part/block/inline 与 genrePart/genreBlock/genreInline 钩子</span>
<span class=c1>-- 读取 g.TraverseContext / 更新 g.TraverseState，执行重写</span>

<span class=c1>-- 3) 渲染：</span>
<span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Manual.BlockDescr</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>toHtml</span><span class=w>   </span><span class=o>:</span><span class=w> </span><span class=n>Option</span><span class=w> </span><span class=o>(</span><span class=n>InlineToHtml</span><span class=w> </span><span class=n>Manual</span><span class=w> </span><span class=o>(</span><span class=n>ReaderT</span><span class=w> </span><span class=n>ExtensionImpls</span><span class=w> </span><span class=n>IO</span><span class=o>))</span>
<span class=w>  </span><span class=n>toTeX</span><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>Option</span><span class=w> </span><span class=o>(</span><span class=n>InlineToTeX</span><span class=w>  </span><span class=n>Manual</span><span class=w> </span><span class=o>(</span><span class=n>ReaderT</span><span class=w> </span><span class=n>ExtensionImpls</span><span class=w> </span><span class=n>IO</span><span class=o>))</span>
<span class=w>  </span><span class=n>extraJs</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>String</span>
<span class=w>  </span><span class=n>extraJsFiles</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>JsFile</span>
<span class=w>  </span><span class=n>extraCss</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>String</span>
<span class=w>  </span><span class=n>extraCssFiles</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=o>(</span><span class=n>String</span><span class=w> </span><span class=bp>×</span><span class=w> </span><span class=n>String</span><span class=o>)</span>
<span class=w>  </span><span class=n>licenseInfo</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>LicenseInfo</span>
</code></pre></div> <div class="admonition blue"> <p class=admonition-title>工作流要点</p> </div> <ul> <li>扩展首先定义“数据（块/行内）+阐释”，让标记语法可产出强类型的文档值。</li> <li>在遍历阶段填充交叉引用、目录、永久链接等全局信息；必要时对文档进行最小重写（直到收敛）。</li> <li>渲染阶段面向不同后端（HTML/TeX）输出，按需注入静态资源与致谢信息。</li> </ul> <div class="admonition purple"> <p class=admonition-title>资源与合规（许可证）</p> </div> <ul> <li>通过 <code>BlockDescr.licenseInfo</code> / <code>InlineDescr.licenseInfo</code> 申报引入的前端依赖及许可证文本。</li> <li>体裁提供统一命令（如 <code>licenseInfo</code>）汇总并渲染致谢页面，便于合规与复用。</li> </ul> <h2 id=_3>输出格式<a class=headerlink href=#_3 title="Permanent link">&para;</a></h2> <p>Verso 目前主要支持 HTML 与 TeX：</p> <ul> <li>HTML：使用 <code>Verso.Output.Html</code> 的嵌入式 DSL 构建页面结构；可在模板中安全插入文本、标签与属性，最终通过 <code>asString</code> 输出字符串。</li> <li>TeX：使用 <code>Verso.Output.TeX</code> 的 DSL 生成（La)TeX 源码，支持命令、环境与文本拼接等。</li> </ul> <p>体裁为各自新增元素实现对应的 HTML/TeX 渲染器，以保证风格一致与依赖注入（内置头部、脚本、样式等）。</p> <h3 id=51-html>5.1 HTML<a class=headerlink href=#51-html title="Permanent link">&para;</a></h3> <p><code>Verso.Output.Html</code> 表示 HTML 文档，常配合命名空间 <code>Verso.Output.Html</code> 提供的 DSL 使用。</p> <div class="admonition green"> <p class=admonition-title>API（Html）</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.Html</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.empty</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.append</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Html</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.seq</span><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>Html</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.fromArray</span><span class=w> </span><span class=o>(</span><span class=n>xs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>Html</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.fromList</span><span class=w>  </span><span class=o>(</span><span class=n>xs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w>  </span><span class=n>Html</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.text</span><span class=w>  </span><span class=o>(</span><span class=n>escape</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Bool</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>s</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span>
<span class=kd>def</span><span class=w> </span><span class=n>Html.tag</span><span class=w>   </span><span class=o>(</span><span class=n>name</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>attrs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=o>(</span><span class=n>String</span><span class=w> </span><span class=bp>×</span><span class=w> </span><span class=n>String</span><span class=o>))</span><span class=w> </span><span class=o>(</span><span class=n>body</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span>
<span class=n>opaque</span><span class=w> </span><span class=n>Html.asString</span><span class=w> </span><span class=o>(</span><span class=n>doc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span>
</code></pre></div> </div> <div class="admonition blue"> <p class=admonition-title>示例：构建一个无序列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=kn>open</span><span class=w> </span><span class=n>Verso.Output.Html</span>

<span class=kd>def</span><span class=w> </span><span class=n>mkList</span><span class=w> </span><span class=o>(</span><span class=n>xs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>Html</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Html</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=o>{{</span><span class=w> </span><span class=bp>&lt;</span><span class=n>ul</span><span class=bp>&gt;</span><span class=w> </span><span class=o>{{</span><span class=w> </span><span class=n>xs.map</span><span class=w> </span><span class=o>({{</span><span class=w> </span><span class=bp>&lt;</span><span class=n>li</span><span class=bp>&gt;</span><span class=w> </span><span class=o>{{</span><span class=w> </span><span class=bp>·</span><span class=w> </span><span class=o>}}</span><span class=w> </span><span class=bp>&lt;/</span><span class=n>li</span><span class=bp>&gt;</span><span class=w> </span><span class=o>}})</span><span class=w> </span><span class=o>}}</span><span class=w> </span><span class=bp>&lt;/</span><span class=n>ul</span><span class=bp>&gt;</span><span class=w> </span><span class=o>}}</span>
</code></pre></div> </div> <div markdown> <strong>结果（asString）</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ul</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>A<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>emph</span><span class=p>&gt;</span>B<span class=p>&lt;/</span><span class=nt>emph</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;</span>C<span class=p>&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ul</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h3 id=52-tex>5.2 TeX<a class=headerlink href=#52-tex title="Permanent link">&para;</a></h3> <p><code>Verso.Output.TeX</code> 表示（La）TeX 文档，常配合 <code>Verso.Output.TeX</code> 提供的 DSL 使用。</p> <div class="admonition green"> <p class=admonition-title>API（TeX）</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.TeX</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.empty</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.text</span><span class=w>  </span><span class=o>(</span><span class=n>s</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.raw</span><span class=w>   </span><span class=o>(</span><span class=n>s</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.command</span><span class=w> </span><span class=o>(</span><span class=n>name</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>optArgs</span><span class=w> </span><span class=n>args</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>TeX</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.environment</span><span class=w> </span><span class=o>(</span><span class=n>name</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>optArgs</span><span class=w> </span><span class=n>args</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>TeX</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.paragraphBreak</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=kd>def</span><span class=w> </span><span class=n>TeX.seq</span><span class=w> </span><span class=o>(</span><span class=n>xs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>TeX</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span>
<span class=n>opaque</span><span class=w> </span><span class=n>TeX.asString</span><span class=w> </span><span class=o>(</span><span class=n>doc</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span>
</code></pre></div> </div> <div class="admonition blue"> <p class=admonition-title>示例：itemize 列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=kn>open</span><span class=w> </span><span class=n>Verso.Output.TeX</span>

<span class=kd>def</span><span class=w> </span><span class=n>mkList</span><span class=w> </span><span class=o>(</span><span class=n>xs</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>TeX</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>TeX</span><span class=w> </span><span class=o>:=</span>
<span class=w>  </span><span class=bp>\</span><span class=n>TeX</span><span class=o>{</span>
<span class=w>    </span><span class=bp>\</span><span class=kd>begin</span><span class=o>{</span><span class=n>itemize</span><span class=o>}</span>
<span class=w>      </span><span class=bp>\</span><span class=n>Lean</span><span class=o>{</span><span class=w> </span><span class=n>xs.map</span><span class=w> </span><span class=o>(</span><span class=bp>\</span><span class=n>TeX</span><span class=o>{</span><span class=bp>\</span><span class=n>item</span><span class=w> </span><span class=s2>&quot; &quot;</span><span class=w> </span><span class=bp>\</span><span class=n>Lean</span><span class=o>{</span><span class=bp>·</span><span class=o>}</span><span class=w> </span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=o>})</span><span class=w> </span><span class=o>}</span>
<span class=w>    </span><span class=bp>\</span><span class=kd>end</span><span class=o>{</span><span class=n>itemize</span><span class=o>}</span>
<span class=w>  </span><span class=o>}</span>
</code></pre></div> </div> <div markdown> <strong>结果（asString）</strong> <div class=highlight><pre><span></span><code><span class=k>\begin</span><span class=nb>{</span>itemize<span class=nb>}</span>
<span class=k>\item</span> A
<span class=k>\item</span> <span class=k>\emph</span><span class=nb>{</span>B<span class=nb>}</span>
<span class=k>\item</span> C
<span class=k>\end</span><span class=nb>{</span>itemize<span class=nb>}</span>
</code></pre></div> </div> </div></p> </div> <h2 id=_4>网页<a class=headerlink href=#_4 title="Permanent link">&para;</a></h2> <p>“网站/博客”体裁通过站点（Site）与主题（Theme）描述网址结构与呈现模板：</p> <ul> <li>Site：用小型配置语言描述页面、文章、类别、静态文件与目录结构。</li> <li>Theme：提供模板（monadic 函数）以 <code>Html</code> 片段组合成完整页面，并可按路径覆写模板或注入额外参数。</li> <li>blogMain：体裁提供的可执行入口，负责遍历站点、应用主题并生成 HTML；可选择相对链接、代码交叉引用目标等参数。</li> </ul> <h3 id=61-blogmain>6.1 生成站点（blogMain）<a class=headerlink href=#61-blogmain title="Permanent link">&para;</a></h3> <div class="admonition green"> <p class=admonition-title>API（blogMain）</p> <div class=highlight><pre><span></span><code><span class=kd>def</span><span class=w> </span><span class=n>Verso.Genre.Blog.blogMain</span>
<span class=w>  </span><span class=o>(</span><span class=n>theme</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Theme</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>site</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Site</span><span class=o>)</span>
<span class=w>  </span><span class=o>(</span><span class=n>relativizeUrls</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Bool</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>true</span><span class=o>)</span>
<span class=w>  </span><span class=o>(</span><span class=n>linkTargets</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Code.LinkTargets</span><span class=w> </span><span class=n>Blog.TraverseContext</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=o>{})</span>
<span class=w>  </span><span class=o>(</span><span class=n>options</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>String</span><span class=o>)</span>
<span class=w>  </span><span class=o>(</span><span class=n>components</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Components</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=bp>%</span><span class=n>registered_components</span><span class=o>)</span>
<span class=w>  </span><span class=o>(</span><span class=n>header</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=o>:=</span><span class=w> </span><span class=n>Output.Html.doctype</span><span class=o>)</span>
<span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>IO</span><span class=w> </span><span class=n>UInt32</span>
<span class=c1>-- 说明：遍历站点并生成 HTML，可选择将绝对链接改为相对链接、指定 Lean 代码的交叉引用目标、注入组件与 HTML 头部等。</span>
</code></pre></div> </div> <h3 id=62-sitedirpagepost>6.2 配置站点（Site/Dir/Page/Post）<a class=headerlink href=#62-sitedirpagepost title="Permanent link">&para;</a></h3> <div class="admonition green"> <p class=admonition-title>API（站点结构）</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Genre.Blog.Site</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Genre.Blog.Dir</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Blog.Page.Meta</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=c1>-- 页面元信息</span>
<span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Blog.Post.Meta</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=c1>-- 博文元信息（日期、作者、分类、草稿等）</span>
</code></pre></div> </div> <div class="admonition blue"> <p class=admonition-title>小贴士</p> <ul> <li><code>Dir.static files</code>: 从指定目录拷贝静态资源至站点根</li> <li>页面/文章均可通过 <code>htmlId</code> 自定义标题的 HTML id，用于锚点</li> </ul> </div> <h3 id=63-themetemplate>6.3 主题与模板（Theme/Template）<a class=headerlink href=#63-themetemplate title="Permanent link">&para;</a></h3> <div class="admonition green"> <p class=admonition-title>API（主题）</p> <div class=highlight><pre><span></span><code><span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Blog.Theme</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>primaryTemplate</span><span class=w>       </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Template</span>
<span class=w>  </span><span class=n>pageTemplate</span><span class=w>          </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Template</span>
<span class=w>  </span><span class=n>postTemplate</span><span class=w>          </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Template</span>
<span class=w>  </span><span class=n>archiveEntryTemplate</span><span class=w>  </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Template</span>
<span class=w>  </span><span class=n>categoryTemplate</span><span class=w>      </span><span class=o>:</span><span class=w> </span><span class=n>Blog.Template</span>
<span class=w>  </span><span class=n>adHocTemplates</span><span class=w>        </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>Option</span><span class=w> </span><span class=n>Blog.Template.Override</span>
<span class=c1>-- 模板是从动态参数构造 Html 的过程（TemplateM Html），</span>
<span class=c1>-- primaryTemplate 负责整页（含 &lt;html&gt;/&lt;head&gt;/&lt;body&gt;）。</span>
</code></pre></div> </div> <div class="admonition purple"> <p class=admonition-title>约定</p> <ul> <li>在 <code>&lt;head&gt;</code> 中调用 <code>builtinHeader</code> 以注入必要依赖与初始化脚本</li> <li><code>primaryTemplate</code> 读取参数 <code>"content"</code>/<code>"posts"</code>/<code>"categories"</code> 决定页类型与内容布局</li> </ul> </div> <h2 id=_5>手册和书<a class=headerlink href=#_5 title="Permanent link">&para;</a></h2> <p>“手册/书籍”体裁侧重线性文本的结构与长期可维护性：</p> <ul> <li>标签与引用：为章节与术语指定稳定 <code>tag</code>，可用于索引、快速跳转与跨文档链接。</li> <li>段落指令：<code>paragraph</code> 指示一组块逻辑上构成段落（HTML/TeX 渲染会相应调整边距/空行）。</li> <li>Docstring/选项文档：可内嵌 Lean 常量的文档与系统选项说明，保持代码与文档一致。</li> <li>术语表：<code>deftech</code> 定义术语，<code>tech</code> 在其他位置引用，键的标准化可配置。</li> <li>开源许可证：块/行内元素可申报前端依赖的许可证，体裁汇总到致谢页面。</li> </ul> <h3 id=71-tags-references>7.1 标签与引用（Tags &amp; References）<a class=headerlink href=#71-tags-references title="Permanent link">&para;</a></h3> <div class="admonition blue"> <p class=admonition-title>要点</p> <ul> <li>通过为章节/术语等指定 <code>tag</code>，可：</li> <li>加入快速跳转与索引</li> <li>生成稳定的永久链接（重构时链接不失效）</li> <li>跨文档自动链接</li> </ul> </div> <h3 id=72-paragraph>7.2 段落指令（paragraph）<a class=headerlink href=#72-paragraph title="Permanent link">&para;</a></h3> <div class="admonition blue"> <p class=admonition-title>段落合并</p> <p>使用 <code>paragraph</code> 将多块合并为一个逻辑段落：HTML 渲染会减小内部边距；TeX 渲染会省略段落间空行。</p> </div> <h3 id=73-docstring>7.3 Docstring 与选项文档<a class=headerlink href=#73-docstring title="Permanent link">&para;</a></h3> <div class="admonition blue"> <p class=admonition-title>示例</p> <p><div class=highlight><pre><span></span><code>{docstring List.forM}
{optionDocs pp.deepTerms.threshold}
</code></pre></div> 将从 Lean 源中提取常量/选项的文档，保持代码与文档同步。</p> </div> <h3 id=74-deftechtech>7.4 术语（deftech/tech）<a class=headerlink href=#74-deftechtech title="Permanent link">&para;</a></h3> <div class="admonition green"> <p class=admonition-title>API（术语）</p> <div class=highlight><pre><span></span><code><span class=kd>def</span><span class=w> </span><span class=n>Verso.Genre.Manual.deftech</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Elab.RoleExpanderOf</span><span class=w> </span><span class=n>TechArgs</span>
<span class=kd>def</span><span class=w> </span><span class=n>Verso.Genre.Manual.tech</span><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>Elab.RoleExpanderOf</span><span class=w> </span><span class=n>TechArgs</span>
<span class=c1>-- deftech 定义术语，内部对关键字作规范化（小写、&quot;ies&quot;→&quot;y&quot;、合并空白/连字符），</span>
<span class=c1>-- tech 在使用处引用；二者共享键的派生规则，可覆盖（normalize=false / 指定 key）。</span>
</code></pre></div> </div> <h3 id=75-oss-licenses>7.5 开源许可证（OSS Licenses）<a class=headerlink href=#75-oss-licenses title="Permanent link">&para;</a></h3> <div class="admonition green"> <p class=admonition-title>API（许可证描述）</p> <div class=highlight><pre><span></span><code><span class=kd>structure</span><span class=w> </span><span class=n>Verso.Genre.Manual.LicenseInfo</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>where</span>
<span class=w>  </span><span class=n>identifier</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=w>    </span><span class=c1>-- SPDX 标识</span>
<span class=w>  </span><span class=n>dependency</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>String</span><span class=w>    </span><span class=c1>-- 依赖名称（用于排序与标题）</span>
<span class=w>  </span><span class=n>howUsed</span><span class=w>    </span><span class=o>:</span><span class=w> </span><span class=n>Option</span><span class=w> </span><span class=n>String</span>
<span class=w>  </span><span class=n>link</span><span class=w>       </span><span class=o>:</span><span class=w> </span><span class=n>Option</span><span class=w> </span><span class=n>String</span>
<span class=w>  </span><span class=n>text</span><span class=w>       </span><span class=o>:</span><span class=w> </span><span class=n>Array</span><span class=w> </span><span class=o>(</span><span class=n>Option</span><span class=w> </span><span class=n>String</span><span class=w> </span><span class=bp>×</span><span class=w> </span><span class=n>String</span><span class=o>)</span><span class=w> </span><span class=c1>-- 按段落分节的纯文本许可证</span>

<span class=kd>def</span><span class=w> </span><span class=n>Verso.Genre.Manual.licenseInfo</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Elab.BlockCommandOf</span><span class=w> </span><span class=n>Unit</span>
<span class=c1>-- 汇总文档中声明的所有前端依赖许可证并渲染致谢页面</span>
</code></pre></div> </div> <h2 id=_6>索引 依赖项 （请参考原文）<a class=headerlink href=#_6 title="Permanent link">&para;</a></h2> <h2 id=markup-example>附：标记示例（markup-example）<a class=headerlink href=#markup-example title="Permanent link">&para;</a></h2> <p>下列示例使用自定义蓝色块，左列是“Verso 语言”，右列是渲染“结果”。</p> <div class="admonition blue"> <p class=admonition-title>有序列表</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=k>1.</span> 第一项
<span class=k>2.</span> 第二项
<span class=k>3.</span> 第三项
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>ol</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>第一项<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>第二项<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>li</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>第三项<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>ol</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>描述列表（术语–说明）</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>术语A: 说明文字A
术语B: 说明文字B
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>dl</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>术语A<span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;&lt;</span><span class=nt>dd</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>说明文字A<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>dt</span><span class=p>&gt;</span>术语B<span class=p>&lt;/</span><span class=nt>dt</span><span class=p>&gt;&lt;</span><span class=nt>dd</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>说明文字B<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>dd</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>dl</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>行内样式与链接</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code><span class=ge>*强调*</span> 与 <span class=gs>**加粗**</span>，以及 <span class=sb>`代码`</span> 片段。
还可以写链接：[可点击文本](#anchor)
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>em</span><span class=p>&gt;</span>强调<span class=p>&lt;/</span><span class=nt>em</span><span class=p>&gt;</span> 与 <span class=p>&lt;</span><span class=nt>strong</span><span class=p>&gt;</span>加粗<span class=p>&lt;/</span><span class=nt>strong</span><span class=p>&gt;</span>，以及 <span class=p>&lt;</span><span class=nt>code</span><span class=p>&gt;</span>代码<span class=p>&lt;/</span><span class=nt>code</span><span class=p>&gt;</span> 片段。
  还可以写链接：<span class=p>&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#anchor&quot;</span><span class=p>&gt;</span>可点击文本<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>代码块（围栏）</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>```lean
def hello : String := &quot;hello&quot;
</code></pre></div> <div class=highlight><pre><span></span><code>&lt;/div&gt;
&lt;div markdown&gt;
**结果**
```html
&lt;pre&gt;&lt;code class=&quot;language-lean&quot;&gt;def hello : String := &quot;hello&quot;&lt;/code&gt;&lt;/pre&gt;
</code></pre></div> </div> </div></p> </div> <div class="admonition blue"> <p class=admonition-title>脚注与脚注引用</p> <p><div class="grid grid-cols-2" markdown> <div markdown> <strong>Verso 语言</strong> <div class=highlight><pre><span></span><code>脚注示例[^note]。

[<span class=nl>^note</span>]: <span class=na>这里是脚注内容。</span>
</code></pre></div> </div> <div markdown> <strong>结果</strong> <div class=highlight><pre><span></span><code><span class=p>&lt;</span><span class=nt>p</span><span class=p>&gt;</span>脚注示例<span class=p>&lt;</span><span class=nt>sup</span> <span class=na>id</span><span class=o>=</span><span class=s>&quot;fnref-note&quot;</span><span class=p>&gt;&lt;</span><span class=nt>a</span> <span class=na>href</span><span class=o>=</span><span class=s>&quot;#fn-note&quot;</span><span class=p>&gt;</span>1<span class=p>&lt;/</span><span class=nt>a</span><span class=p>&gt;&lt;/</span><span class=nt>sup</span><span class=p>&gt;</span>。<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
<span class=p>&lt;</span><span class=nt>section</span> <span class=na>class</span><span class=o>=</span><span class=s>&quot;footnotes&quot;</span><span class=p>&gt;</span>
  <span class=p>&lt;</span><span class=nt>ol</span><span class=p>&gt;</span>
    <span class=p>&lt;</span><span class=nt>li</span> <span class=na>id</span><span class=o>=</span><span class=s>&quot;fn-note&quot;</span><span class=p>&gt;&lt;</span><span class=nt>p</span><span class=p>&gt;</span>这里是脚注内容。<span class=p>&lt;/</span><span class=nt>p</span><span class=p>&gt;&lt;/</span><span class=nt>li</span><span class=p>&gt;</span>
  <span class=p>&lt;/</span><span class=nt>ol</span><span class=p>&gt;</span>
<span class=p>&lt;/</span><span class=nt>section</span><span class=p>&gt;</span>
</code></pre></div> </div> </div></p> </div> <h2 id=namedocs>附：命名文档块（namedocs）摘要<a class=headerlink href=#namedocs title="Permanent link">&para;</a></h2> <p>以下以绿色“API”样式概括常用构件（保留关键签名与用途）。</p> <div class="admonition green"> <p class=admonition-title>Verso.Doc.Genre</p> <div class=highlight><pre><span></span><code><span class=kd>structure</span><span class=w> </span><span class=n>Verso.Doc.Genre</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 关键字段：PartMetadata / Block / Inline / TraverseContext / TraverseState</span>
<span class=c1>-- 说明：定义体裁扩展点与遍历所需上下文与状态。</span>
</code></pre></div> </div> <div class="admonition green"> <p class=admonition-title>Verso.Doc.Part / Block / Inline</p> <div class=highlight><pre><span></span><code><span class=kd>def</span><span class=w>   </span><span class=n>Verso.Doc.Part</span><span class=w>   </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>def</span><span class=w>   </span><span class=n>Verso.Doc.Block</span><span class=w>  </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>def</span><span class=w>   </span><span class=n>Verso.Doc.Inline</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 说明：文档的层级元素；Part 含 Block，Block 含 Inline。</span>
</code></pre></div> </div> <div class="admonition green"> <p class=admonition-title>遍历接口（Traversal）</p> <div class=highlight><pre><span></span><code><span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.Traverse</span><span class=w>      </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>outParam</span><span class=w> </span><span class=o>(</span><span class=kt>Type</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=kt>Type</span><span class=o>))</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.TraversePart</span><span class=w>  </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=kd>class</span><span class=w> </span><span class=n>Verso.Doc.TraverseBlock</span><span class=w> </span><span class=o>(</span><span class=n>g</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>Doc.Genre</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 说明：提供遍历钩子与基于上下文/状态的重写。</span>
</code></pre></div> </div> <div class="admonition green"> <p class=admonition-title>HTML 输出 DSL</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.Html</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 构造：text / tag / seq；工具：empty / append / fromArray / fromList / asString</span>
</code></pre></div> </div> <div class="admonition green"> <p class=admonition-title>TeX 输出 DSL</p> <div class=highlight><pre><span></span><code><span class=kd>inductive</span><span class=w> </span><span class=n>Verso.Output.TeX</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span>
<span class=c1>-- 构造：text / raw / command / environment / paragraphBreak / seq；工具：empty / asString</span>
</code></pre></div> </div> <div class="admonition blue"> <p class=admonition-title>def</p> <p><div class=highlight><pre><span></span><code><span class=n>List.forM</span><span class=w> </span><span class=o>{</span><span class=n>u</span><span class=w> </span><span class=n>v</span><span class=w> </span><span class=n>w</span><span class=o>}</span><span class=w> </span><span class=o>{</span><span class=n>m</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>u</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>v</span><span class=o>}</span><span class=w> </span><span class=o>[</span><span class=n>Monad</span><span class=w> </span><span class=n>m</span><span class=o>]</span>
<span class=o>{</span><span class=n>a</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kt>Type</span><span class=w> </span><span class=n>w</span><span class=o>}</span><span class=w> </span><span class=o>(</span><span class=n>as</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>List</span><span class=w> </span><span class=n>a</span><span class=o>)</span><span class=w> </span><span class=o>(</span><span class=n>f</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>a</span><span class=w> </span><span class=bp>→</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>PUnit</span><span class=o>)</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=n>m</span><span class=w> </span><span class=n>PUnit</span>
</code></pre></div> Applies the monadic action <code>f</code> to every element in the list, in order.</p> <dl> <dt>参数说明：</dt> <dd><strong>as</strong> — 输入列表</dd> <dd><strong>f</strong> — 作用在元素上的 monadic 函数</dd> </dl> <p>参见：<code>List.mapM</code>（收集结果的变体）。</p> </div> <div class="admonition purple"> <p class=admonition-title>lemma</p> <p>这里是一个引理块的示例。</p> </div> <div class="admonition green"> <p class=admonition-title>API</p> <p>这里是 API 描述块的示例。</p> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.instant", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../assets/javascripts/bundle.f55a23d4.min.js></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> </body> </html>